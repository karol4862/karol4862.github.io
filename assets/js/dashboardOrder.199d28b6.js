(window.webpackJsonp=window.webpackJsonp||[]).push([["dashboardOrder"],{"5d4a":function(t,e,a){"use strict";var r=a("03cb"),n=a("8a64"),i=a("061a"),o=a("7585");a("3626"),e.locale=r.locale.bind(r),e.loadMessages=n.load.bind(n),e.formatMessage=n.format.bind(n),e.formatNumber=i.format.bind(i),e.parseNumber=i.parse.bind(i),e.formatDate=o.format.bind(o),e.parseDate=o.parse.bind(o),e.message=n,e.number=i,e.date=o,e.disableIntl=function(){"intl"===i.engine()&&i.resetInjection(),"intl"===o.engine()&&o.resetInjection()}},6191:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("2b0e"),n=r.default||r,i=a("5cf5"),o=a("d710"),s=n.extend({extends:o.DxComponent,props:{accessKey:String,activeStateEnabled:Boolean,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,icon:String,onClick:Function,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,stylingMode:String,tabIndex:Number,template:{},text:String,type:String,useSubmitBehavior:Boolean,validationGroup:String,visible:Boolean,width:[Function,Number,String]},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=i.default}});e.DxButton=s,e.default=s},"636c":function(t,e,a){"use strict";var r=(a("7f7f"),a("96cf"),a("3b8d")),n={props:["display","data"],data:function(){return{bankingGroups:[]}},mounted:function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.$emit("changeLoader",!0),t.next=3,this.getBankingGroups();case 3:this.$emit("changeLoader",!1);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),methods:{getBankingGroups:function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("payment/getBankingGroups");case 2:this.bankingGroups=t.sent;case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),selectBankGroup:function(t){this.data.payment.bankGroup=this.bankingGroups[t.id],this.getBankingGroups(),this.$emit("setSelectedOptions",{calculate:!1,type:"bankGroup",object:this.data.payment.bankGroup}),this.$notify("success filled","Sposób płatności","Sposób płatności została zmieniona na <b>"+t.name+"</b>")}},computed:{activeModal:{get:function(){return this.display},set:function(t){this.$emit("changeDisplayModal",t)}}}},i=a("2877"),o=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{ref:"modalBankingGroups",attrs:{id:"modalBankingGroups",size:"lg",title:"Wybierz sposób płatności",centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""},model:{value:t.activeModal,callback:function(e){t.activeModal=e},expression:"activeModal"}},[a("b-row",{staticClass:"shopping-cart"},t._l(t.bankingGroups,(function(e,r){return a("b-colxx",{key:r,staticClass:"mb-3",attrs:{xxs:"6",md:"3"}},[a("b-card",{staticClass:"bank-group",class:{active:void 0!==t.data.payment.bankGroup&&e.id===t.data.payment.bankGroup.id},attrs:{"no-body":""},on:{click:function(a){return t.selectBankGroup(e)}}},[a("b-card-body",{staticClass:"text-center bank-group-body"},[void 0!==t.data.payment.bankGroup&&e.id===t.data.payment.bankGroup.id?a("div",{staticClass:"selected-address"},[a("i",{staticClass:"fas fa-check fa-2x text-primary"})]):t._e(),t._v(" "),a("div",{staticClass:"w-100 text-center"},[a("img",{staticClass:"card-img-top",attrs:{src:e.img}})]),t._v(" "),a("div",{staticClass:"w-100 pt-2 text-center"},[a("p",{staticClass:"mb-0 pb-0"},[t._v(t._s(e.name))])])])],1)],1)})),1),t._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{attrs:{type:"button",variant:"outline-primary",disabled:!t.data.payment.bankGroup},on:{click:function(e){return t.$emit("doAction")}}},[t._v("Złóż zamówiewnie i przejdź do płatności")]),t._v(" "),a("b-button",{attrs:{type:"button",variant:"primary"},on:{click:function(e){t.activeModal=!1}}},[t._v("Zamknij")])],1)],2)],1)}),[],!1,null,null,null);e.a=o.exports},a6e5:function(t,e,a){"use strict";var r=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),n=(a("96cf"),a("3b8d")),i=a("d30a"),o=a("6191"),s=a.n(o),l=(a("5d4a"),a("636c")),d=a("2f62");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}var u={props:["display","data","optionsState"],data:function(){return{isLoad:!1,totalCount:0,orderElements:[],selectedStatus:null,showBankingGroupsModal:!1,bankingGroupsModalObject:{payment:{}}}},methods:{getPackageLabel:function(t){var e=document.createElement("a");e.href="".concat(AppConst.appBaseUrl,"trackingNumbers/").concat(this.data.trackingNumber,".pdf"),e.download="".concat(this.data.trackingNumber,".pdf"),document.body.appendChild(e),e.click(),document.body.removeChild(e),this.$notify("success filled","Etykieta","Pobrano etykietę listu przewozowego dla ".concat(this.data.trackingNumber,"."))},changeLoader:function(t){this.$emit("changeLoader",t)},payForOrder:function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.data.paymentNumber){t.next=4;break}return this.changeLoader(!0),location.href=this.data.paymentUrl,t.abrupt("return");case 4:if(!(0===this.data.state&&this.data.paymentMethodName&&this.data.paymentMethodName.indexOf("elektroniczna")>=0)||this.bankingGroupsModalObject.payment.bankGroup){t.next=8;break}this.showBankingGroupsModal=!0,t.next=21;break;case 8:return this.data.groupId=this.bankingGroupsModalObject.payment.bankGroup?this.bankingGroupsModalObject.payment.bankGroup.id:null,this.changeLoader(!0),t.prev=10,e={id:this.data.id,groupId:this.data.groupId},a=this,t.next=15,this.$store.dispatch("orders/payForOrder",e).then((function(t){a.$notify("success filled","Płatność za zamówienie","Płatność została wygenerowana. Za chwilę zostaniesz przekierowany na stronę płatności"),location.href=t})).catch((function(t){a.isLoad=!1}));case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(10),this.$notify("error filled","Błąd podczas generowania płatności","Skontaktuj się z administratorem"),this.changeLoader(!1);case 21:case"end":return t.stop()}}),t,this,[[10,17]])})));return function(){return t.apply(this,arguments)}}(),getOrderElements:function(){this.$emit("changeLoader",!0);var t={Id:this.data.id},e=this;this.$store.dispatch("orders/getOrderElements",t).then((function(t){e.orderElements=t.items,e.totalCount=t.totalCount,e.$emit("changeLoader",!1)})).catch((function(t){e.$emit("changeLoader",!1)}))},getDocumentDate:function(t){return moment(t).format("YYYY-MM-DD HH:mm:ss")},calculateCellNetValue:function(t){return this.$options.filters.currency(t.priceNet)},calculateCellGrossValue:function(t){return this.$options.filters.currency(t.priceGross)},changeOrderStatus:function(){this.$emit("changeOrderStatus",this.selectedStatus)}},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(r.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(d.b)({pageSize:"orders/getPageSizeElements",pageSizes:"orders/getPageSizesElements",loggedUser:"auth/currentUser"}),{activeModal:{get:function(){return this.display&&(this.orderElements={},this.getOrderElements()),this.display},set:function(t){this.$emit("changeDisplayModal",t)}}}),components:{DxDataGrid:i.DxDataGrid,DxColumn:i.DxColumn,DxEditing:i.DxEditing,DxButton:s.a,DxPager:i.DxPager,DxPaging:i.DxPaging,DxSearchPanel:i.DxSearchPanel,DxSummary:i.DxSummary,DxTotalItem:i.DxTotalItem,DxLoadPanel:i.DxLoadPanel,BankingGroupsModal:l.a}},p=a("2877"),m=Object(p.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoad?a("div",{staticClass:"loading"}):t._e(),t._v(" "),a("b-modal",{ref:"modalOrder",attrs:{id:"modalOrder",size:"xl",title:"Szczegóły zamówienia "+t.data.numberString,centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""},model:{value:t.activeModal,callback:function(e){t.activeModal=e},expression:"activeModal"}},[a("b-form",{ref:"formOrder",attrs:{id:"formOrder"},on:{submit:function(e){return e.preventDefault(),t.saveOrder(e)}}},[a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("ul",{staticClass:"fa-ul ml-3 mb-0"},[a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v(" \n                            Właściciel: "),a("b",[t._v(t._s(t.data.fullName))])]),t._v(" "),a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v(" \n                            Data dokumentu: "),a("b",[t._v(t._s(t.getDocumentDate(t.data.orderDate)))])]),t._v(" "),a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v(" \n                            Status zamówienia: "),a("b-badge",{attrs:{variant:"primary"}},[t._v(t._s(t.data.stateName))])],1),t._v(" "),a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v("\n                            Metoda płatności: "),a("b",[t._v(t._s(t.data.paymentMethodName))])]),t._v(" "),t.data.paymentMethodName&&t.data.paymentMethodName.indexOf("elektroniczna")>=0?a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v("\n                            Status płatności: "),a("b-badge",{attrs:{variant:"primary"}},[t._v(t._s(t.data.paymentStatusName))])],1):t._e(),t._v(" "),t.data.paymentStatus&&1===t.data.paymentStatus?a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v("\n                            Data płatności: "),a("b",[t._v(t._s(t.$moment(t.data.paymentTime).format("YYYY-MM-DD HH:mm:ss")))])]):t._e(),t._v(" "),a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v(" \n                            Sposób dostawy: "),a("b",[t._v(t._s(t.data.deliveryMethodName))])]),t._v(" "),a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v(" \n                            Koszt dostawy: "),a("b",[t._v(t._s(t._f("currency")(t.data.deliveryCost,{symbol:t.data.currency})))])]),t._v(" "),t.data.trackingNumber?a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v(" \n                            Numer listu przewozowego: "),a("b",[t._v(t._s(t.data.trackingNumber))])]):t._e()])]),t._v(" "),a("b-colxx",{attrs:{xxs:"12"}},[a("dx-data-grid",{attrs:{"data-source":t.orderElements,"show-borders":!0,"column-hiding-enabled":!0,columnAutoWidth:!0,noDataText:"Brak danych..."},scopedSlots:t._u([{key:"cellValueTemplate",fn:function(e){var a=e.data;return[t._v("\n                            "+t._s(t._f("currency")(a.value,{symbol:a.data.currency}))+"\n                        ")]}}])},[a("dx-load-panel",{attrs:{enabled:!0,message:"Trwa ładowanie..."}}),t._v(" "),a("dx-paging",{attrs:{enabled:!1}}),t._v(" "),a("dx-search-panel",{attrs:{visible:!0,width:250,placeholder:"Szukaj..."}}),t._v(" "),a("dx-paging",{attrs:{"page-size":t.pageSize}}),t._v(" "),a("dx-pager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":t.pageSizes,"show-info":!0,infoText:"Strona {0} z {1} dostępnych ({2} pozycji)"}}),t._v(" "),a("dx-column",{attrs:{caption:"Kod produktu","allow-editing":!1,"data-field":"code"}}),t._v(" "),a("dx-column",{attrs:{caption:"Nazwa produktu",width:500,"allow-editing":!1,"data-field":"name"}}),t._v(" "),a("dx-column",{attrs:{caption:"Ilość","allow-editing":!1,"data-field":"qty"}}),t._v(" "),a("dx-column",{attrs:{caption:"Cena netto","allow-editing":!1,"data-field":"priceNet","cell-template":"cellValueTemplate"}}),t._v(" "),"true"===t.getSettingValue("App.UserManagement.NettoBrutto")?a("dx-column",{attrs:{caption:"Cena brutto","allow-editing":!1,"data-field":"priceGross","cell-template":"cellValueTemplate"}}):t._e()],1)],1)],1),t._v(" "),6===t.data.state||7===t.data.state?a("b-row",[a("b-colxx",{staticClass:"pt-3",attrs:{xxs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-dark"},[a("div",{staticClass:"align-self-center"},[a("h6",{staticClass:"mb-0"},[t._v("List przewozowy")])])])]),t._v(" "),a("b-colxx",{attrs:{xxs:"12"}},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-hover table-hover-click table-deliveries"},[a("thead",[a("tr",[a("th",{staticClass:"align-middle",attrs:{width:"5%",scope:"col"}}),t._v(" "),a("th",{staticClass:"align-middle",attrs:{width:"30%",scope:"col"}},[t._v("Numer listu przewozowego")]),t._v(" "),a("th",{staticClass:"align-middle",attrs:{width:"65%",scope:"col"}},[t._v("Śledź przesyłkę")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticClass:"text-center align-middle",on:{click:function(e){return t.getPackageLabel()}}},[a("i",{staticClass:"fas fa-tag text-primary"})]),t._v(" "),a("td",{staticClass:"align-middle"},[t._v("\n                          "+t._s(t.data.trackingNumber)+"\n                        ")]),t._v(" "),a("td",{staticClass:"align-middle"},[a("a",{attrs:{target:"_blank",href:"https://sprawdz.dhl.com.pl/szukaj.aspx?m=0&sn="+t.data.trackingNumber}},[t._v(t._s("https://sprawdz.dhl.com.pl/szukaj.aspx?m=0&sn="+t.data.trackingNumber))])])])])])])])],1):t._e()],1),t._v(" "),a("template",{slot:"modal-footer"},[0===t.data.state&&t.data.paymentMethodName&&t.data.paymentMethodName.indexOf("elektroniczna")>=0&&0===t.data.paymentStatus&&t.data.userId===t.loggedUser.currentUser.id?a("b-button",{staticClass:"ml-2",attrs:{type:"button",variant:"outline-primary"},on:{click:t.payForOrder}},[t._v("Opłać zamówienie")]):t._e(),t._v(" "),a("b-button",{staticClass:"ml-2",attrs:{type:"button",variant:"outline-primary"},on:{click:function(e){t.activeModal=!1}}},[t._v("Zamknij")])],1)],2),t._v(" "),t.showBankingGroupsModal?a("BankingGroupsModal",{attrs:{display:t.showBankingGroupsModal,data:t.bankingGroupsModalObject},on:{changeLoader:t.changeLoader,changeDisplayModal:function(e){t.showBankingGroupsModal=!1,t.bankingGroupsModalObject.payment={}},doAction:t.payForOrder}}):t._e()],1)}),[],!1,null,null,null);e.a=m.exports},c607:function(t,e,a){"use strict";a.r(e);var r=(a("8e6e"),a("456d"),a("7514"),a("bd86")),n=(a("ac6a"),a("96cf"),a("3b8d")),i=a("a6e5"),o=a("d30a"),s=a("6191"),l=a.n(s),d=(a("5d4a"),a("2f62"));function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}var u={props:["display","data"],data:function(){return{isLoad:!1,totalCount:0,orderChangeHistories:[]}},methods:{getOrderChangeHistories:function(){this.isLoad=!0;var t={Id:this.data.id},e=this;this.$store.dispatch("orders/getOrderChangeHistories",t).then((function(t){e.orderChangeHistories=t.items,e.totalCount=t.totalCount,e.isLoad=!1})).catch((function(t){e.isLoad=!1}))},getDocumentDate:function(t){return moment(t).format("YYYY-MM-DD HH:mm:ss")}},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(r.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(d.b)({pageSize:"orders/getPageSizeElements",pageSizes:"orders/getPageSizesElements",loggedUser:"auth/currentUser"}),{activeModal:{get:function(){return this.display&&(this.orderChangeHistories=[],this.getOrderChangeHistories()),this.display},set:function(t){this.$emit("changeDisplayModal",t)}}}),components:{DxDataGrid:o.DxDataGrid,DxColumn:o.DxColumn,DxEditing:o.DxEditing,DxButton:l.a,DxPager:o.DxPager,DxPaging:o.DxPaging,DxSearchPanel:o.DxSearchPanel,DxSummary:o.DxSummary,DxTotalItem:o.DxTotalItem,DxLoadPanel:o.DxLoadPanel}},p=a("2877"),m=Object(p.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoad?a("div",{staticClass:"loading"}):t._e(),t._v(" "),a("b-modal",{ref:"modalOrder",attrs:{id:"modalOrder",size:"xl",title:"Historia zamówienia "+t.data.numberString,centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""},model:{value:t.activeModal,callback:function(e){t.activeModal=e},expression:"activeModal"}},[a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("ul",{staticClass:"fa-ul ml-3 mb-0"},[a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v(" \n                        Właściciel: "),a("b",[t._v(t._s(t.data.fullName))])]),t._v(" "),a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v(" \n                        Data dokumentu: "),a("b",[t._v(t._s(t.getDocumentDate(t.data.orderDate)))])]),t._v(" "),a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v(" \n                        Aktualny status zamówienia:: "),a("b-badge",{attrs:{variant:"primary"}},[t._v(t._s(t.data.stateName))])],1)])]),t._v(" "),a("b-colxx",{attrs:{xxs:"12"}},[a("dx-data-grid",{attrs:{"data-source":t.orderChangeHistories,"show-borders":!0,"column-hiding-enabled":!0,columnAutoWidth:!0,noDataText:"Brak danych..."}},[a("dx-load-panel",{attrs:{enabled:!0,message:"Trwa ładowanie..."}}),t._v(" "),a("dx-paging",{attrs:{enabled:!1}}),t._v(" "),a("dx-search-panel",{attrs:{visible:!0,width:250,placeholder:"Szukaj..."}}),t._v(" "),a("dx-paging",{attrs:{"page-size":t.pageSize}}),t._v(" "),a("dx-pager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":t.pageSizes,"show-info":!0,infoText:"Strona {0} z {1} dostępnych ({2} pozycji)"}}),t._v(" "),a("dx-column",{attrs:{caption:"Data zdarzenia","sort-order":"desc","allow-editing":!1,"data-type":"datetime",format:"yyyy-MM-dd HH:mm:ss","data-field":"creationTime"}}),t._v(" "),a("dx-column",{attrs:{caption:"Stary status","allow-editing":!1,"data-field":"oldStatusName"}}),t._v(" "),a("dx-column",{attrs:{caption:"Nowy status","allow-editing":!1,"data-field":"newStatusName"}}),t._v(" "),a("dx-column",{attrs:{caption:"Użytkownik","allow-editing":!1,"data-field":"userName"}})],1)],1)],1),t._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{staticClass:"ml-2",attrs:{type:"button",variant:"primary"},on:{click:function(e){t.activeModal=!1}}},[t._v("Zamknij")])],1)],2)],1)}),[],!1,null,null,null).exports,f=a("4df8");function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}var g={props:["userId","hiding","tenantId"],data:function(){return{isLoad:!1,filter:{dateFrom:null,dateTo:new Date,selectedState:null},optionsState:[],editButtons:[{hint:this.L("Podgląd"),icon:"find",onClick:this.editClick},{hint:this.L("Historia zmian"),icon:"comment",visible:function(t){return!0===abp.auth.hasPermission("Pages.Order.History")},onClick:this.historyClick}],showModal:!1,modalData:{},selectedOrders:[],selectedStatus:null,showModalHistory:!1,modalDataHistory:{}}},methods:{changeLoader:function(t){this.isLoad=t},checkDateFrom:function(t){null!=t&&null!==this.filter.dateTo&&void 0!==this.filter.dateTo&&moment(t).format("YYYY-MM-DD HH:mm")>=moment(this.filter.dateTo).format("YYYY-MM-DD HH:mm")&&(this.filter.dateFrom=this.filter.dateTo,this.$notify("warning filled","Filtrowanie listy","Data od nie może być późniejsza niż data do.",{duration:2e3,permanent:!1}))},checkDateTo:function(t){null!=t&&null!==this.filter.dateFrom&&void 0!==this.filter.dateFrom&&moment(t).format("YYYY-MM-DD HH:mm")<=moment(this.filter.dateFrom).format("YYYY-MM-DD HH:mm")&&(this.filter.dateTo=this.filter.dateFrom,this.$notify("warning filled","Filtrowanie listy","Data do nie może być wcześniejsza niż data od.",{duration:2e3,permanent:!1}))},onSelectionChanged:function(t){t.selectedRowKeys;var e=t.selectedRowsData;this.selectedOrders=e},calculateCellValue:function(t){return this.$options.filters.currency(t.totalValueGross)},hideModal:function(){this.showModal=!1},onToolbarPreparing:function(t){},changeOrderStatus:function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e){var a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a={statusId:e.value,ordersId:[]}).ordersId.push(this.modalData.id),r=this,t.next=5,this.$store.dispatch("orders/changeOrdersStatus",a).then((function(t){r.getOrders(),r.$notify("success filled","Zmiana statusu zamówienia","Status dla wybranego zamówienia został zmieniony na ".concat(e.text),{duration:2e3,permanent:!1}),r.showModal=!1}));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),changeOrdersStatus:function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isLoad=!0,e={statusId:this.selectedStatus.value,ordersId:this.selectedOrders.map((function(t){return t.id}))},a=this,t.next=5,this.$store.dispatch("orders/changeOrdersStatus",e).then((function(t){a.getOrders(),a.$notify("success filled","Zmiana statusów zamówień","Statusy dla wybranych zamówień zostaly zmieione na ".concat(a.selectedStatus.text),{duration:2e3,permanent:!1})}));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),filterOrders:function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getOrders();case 2:this.$notify("success filled","Filtrowanie listy","Lista zamówień została przefiltrowana według kryteriów",{duration:3e3,permanent:!1});case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),clearFilters:function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.filter={dateFrom:null,dateTo:new Date,selectedState:null},t.next=3,this.getOrders();case 3:this.$notify("success filled","Filtrowanie listy","Filtry zostały wyczyszczone",{duration:3e3,permanent:!1});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),editClick:function(t){this.modalData=t.row.data,this.showModal=!0},historyClick:function(t){this.modalDataHistory=t.row.data,this.showModalHistory=!0},getOrders:function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isLoad=!0,e={maxResultCount:2147483647,skipCount:0,dateFrom:null!==this.filter.dateFrom?moment(this.filter.dateFrom).format("YYYY-MM-DD"):null,dateTo:null!==this.filter.dateTo?moment(this.filter.dateTo).format("YYYY-MM-DD"):null,status:null!==this.filter.selectedState?this.filter.selectedState.id:null,userId:null==this.userId?this.loggedUser.currentUser.id:parseInt(this.userId),tenantId:void 0!==this.tenantId?this.tenantId:1},a=this,t.next=5,this.$store.dispatch("orders/getAll",e).then((function(t){a.isLoad=!1})).catch((function(t){a.isLoad=!1}));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),getEnumValues:function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e){var a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={type:e},r=this,t.next=4,this.$store.dispatch("dictionaries/getEnumValues",a).then((function(t){t.forEach((function(t){r.optionsState.push(t)}))}));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(Object(a),!0).forEach((function(e){Object(r.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(d.b)({orders:"orders/getAllOrders",totalCount:"orders/getTotalCount",pageSize:"orders/getPageSize",pageSizes:"orders/getPageSizes",loggedUser:"auth/currentUser"})),created:function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isLoad=!0,t.next=3,this.getEnumValues("OrderState");case 3:return this.$route.params.statusId&&(null!==(e=this.optionsState.find((function(t){return t.id===parseInt(a.$route.params.statusId)})))&&(this.filter.selectedState=e)),t.next=6,this.getOrders();case 6:this.$nextTick((function(){a.isLoad=!1}));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),components:{DxDataGrid:o.DxDataGrid,DxColumn:o.DxColumn,DxEditing:o.DxEditing,DxButton:l.a,DxPager:o.DxPager,DxPaging:o.DxPaging,DxSelection:o.DxSelection,DxSearchPanel:o.DxSearchPanel,DxSummary:o.DxSummary,DxTotalItem:o.DxTotalItem,DxLoadPanel:o.DxLoadPanel,OrderModal:i.a,OrderHistory:m,vSelectComponent:f.a}},b=Object(p.a)(g,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoad?a("div",{staticClass:"loading"}):t._e(),t._v(" "),a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("piaf-breadcrumb")],1)],1),t._v(" "),a("b-form",{ref:"formFilter",attrs:{id:"formFilter"},on:{submit:function(e){return e.preventDefault(),t.filterOrders(e)}}},[a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-dark"},[a("div",{staticClass:"align-self-center"},[a("h6",{staticClass:"mb-0"},[t._v(t._s(t._f("l")("Filtry")))])])])])],1),t._v(" "),a("b-row",{staticClass:"pt-2"},[a("b-colxx",{attrs:{xxs:"12",md:"4"}},[a("b-form-group",{attrs:{label:t._f("l")("Data od:")}},[a("v-date-picker",{attrs:{mode:"single","popover-visibility":"focus",locale:"pl","input-props":{class:"form-control",placeholder:""+t.L("Data od:")}},on:{input:t.checkDateFrom},model:{value:t.filter.dateFrom,callback:function(e){t.$set(t.filter,"dateFrom",e)},expression:"filter.dateFrom"}})],1)],1),t._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"4"}},[a("b-form-group",{attrs:{label:t._f("l")("Data do:")}},[a("v-date-picker",{attrs:{mode:"single","popover-visibility":"focus",locale:"pl","input-props":{class:"form-control",placeholder:""+t.L("Data do:")}},on:{input:t.checkDateTo},model:{value:t.filter.dateTo,callback:function(e){t.$set(t.filter,"dateTo",e)},expression:"filter.dateTo"}})],1)],1),t._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"4"}},[a("b-form-group",{attrs:{label:t._f("l")("Status zamówienia:")}},[a("vSelectComponent",{attrs:{options:t.optionsState,label:"name",placeholder:t._f("l")("Wybierz status")},model:{value:t.filter.selectedState,callback:function(e){t.$set(t.filter,"selectedState",e)},expression:"filter.selectedState"}})],1)],1)],1)],1),t._v(" "),a("b-row",[a("b-colxx",{staticClass:"border-top border-dark py-2 text-right",attrs:{xxs:"12"}},[a("b-button",{staticClass:"squared",attrs:{type:"button",variant:"outline-primary"},on:{click:t.clearFilters}},[t._v(t._s(t._f("l")("Wyczyść")))]),t._v(" "),a("b-button",{staticClass:"squared",attrs:{type:"submit",variant:"primary",form:"formFilter"}},[t._v(t._s(t._f("l")("Filtruj")))])],1)],1),t._v(" "),a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-dark"},[a("div",{staticClass:"align-self-center"},[a("h6",{staticClass:"mb-0"},[t._v(t._s(t._f("l")("Lista zamówień")))])])])])],1),t._v(" "),a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("dx-data-grid",{attrs:{"data-source":t.orders,"show-row-lines":!0,"column-hiding-enabled":!this.hiding,"row-alternation-enabled":!0,columnAutoWidth:!0,noDataText:t._f("l")("Brak danych...")},on:{"toolbar-preparing":function(e){return t.onToolbarPreparing(e)}},scopedSlots:t._u([{key:"cellTemplate",fn:function(e){var r=e.data;return[a("b-badge",{attrs:{variant:"primary"}},[t._v(t._s(r.value))])]}},{key:"cellValueTemplate",fn:function(e){var a=e.data;return[t._v("\n          "+t._s(t._f("currency")(a.value,{symbol:a.data.currency}))+"\n        ")]}}])},[a("dx-paging",{attrs:{enabled:!1}}),t._v(" "),a("dx-editing",{attrs:{"allow-updating":!0,"allow-deleting":!0,"use-icons":!0}}),t._v(" "),a("dx-search-panel",{attrs:{visible:!0,width:250,placeholder:t._f("l")("Szukaj...")}}),t._v(" "),a("dx-paging",{attrs:{"page-size":t.pageSize}}),t._v(" "),a("dx-pager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":t.pageSizes,"show-info":!0,infoText:t._f("l")("Strona {0} z {1} dostępnych ({2} pozycji)")}}),t._v(" "),a("dx-column",{attrs:{buttons:t.editButtons,type:"buttons"}}),t._v(" "),a("dx-column",{attrs:{caption:t._f("l")("Numerator"),"allow-editing":!1,"data-field":"numberString"}}),t._v(" "),a("dx-column",{attrs:{caption:t._f("l")("Status"),"allow-editing":!1,"data-field":"stateName","cell-template":"cellTemplate"}}),t._v(" "),a("dx-column",{attrs:{caption:t._f("l")("Właściciel"),"allow-editing":!1,"data-field":"fullName"}}),t._v(" "),a("dx-column",{attrs:{caption:t._f("l")("Data dokumentu"),"sort-order":"desc","allow-editing":!1,"data-type":"datetime",format:"yyyy-MM-dd","data-field":"orderDate"}}),t._v(" "),a("dx-column",{attrs:{caption:t._f("l")("Wartość netto"),"allow-editing":!1,"data-field":"totalValueNet","cell-template":"cellValueTemplate"}}),t._v(" "),"true"===t.getSettingValue("App.UserManagement.NettoBrutto")?a("dx-column",{attrs:{caption:t._f("l")("Wartość brutto"),"allow-editing":!1,"data-field":"totalValueGross","cell-template":"cellValueTemplate"}}):t._e(),t._v(" "),t._v(" "),t._v(" "),a("dx-summary",[a("dx-total-item",{attrs:{column:"numberString","summary-type":"count",displayFormat:t._f("l")("Ilość: {0}")}})],1)],1)],1)],1),t._v(" "),t.showModal?a("OrderModal",{attrs:{display:t.showModal,data:t.modalData,optionsState:t.optionsState},on:{changeDisplayModal:t.hideModal,changeOrderStatus:t.changeOrderStatus,changeLoader:t.changeLoader}}):t._e(),t._v(" "),t.showModalHistory?a("OrderHistory",{attrs:{display:t.showModalHistory,data:t.modalDataHistory},on:{changeDisplayModal:function(e){t.showModalHistory=!1}}}):t._e()],1)}),[],!1,null,null,null);e.default=b.exports}}]);