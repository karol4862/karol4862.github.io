(window.webpackJsonp=window.webpackJsonp||[]).push([["dashboardUserManagement","chunk-7caf1105"],{1798:function(e,t,a){"use strict";var s=a("5d61");a.n(s).a},"20d6":function(e,t,a){"use strict";var s=a("5ca1"),r=a("0a49")(6),o="findIndex",i=!0;o in[]&&Array(1)[o]((function(){i=!1})),s(s.P+s.F*i,"Array",{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(o)},4562:function(e,t,a){"use strict";a.r(t);var s=(a("8e6e"),a("456d"),a("96cf"),a("3b8d")),r=(a("7f7f"),a("7514"),a("ac6a"),a("a481"),a("bd86")),o=a("5c47"),i=(a("6dfc"),a("2f62"));function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var l={data:function(){return{isLoad:!1,typeNav:"",role:{id:void 0,permissions:[]},permissionsType:[{id:"create",name:"Create"},{id:"update",name:"Update"},{id:"read",name:"Read"},{id:"delete",name:"Delete"}],navigationElements:[{type:["dodaj","edytuj"],id:"dane_roli",name:"Dane roli",isValid:!0,icon:"fa-info"},{type:["dodaj","edytuj"],id:"uprawnienia",name:"Uprawnienia",isValid:!0,icon:"fa-address-card"}],currentNav:"dane_roli",IsNotValid:!1}},methods:{getRole:function(e){this.isLoad=!0;var t={id:e,tenantId:this.isHostTenant?this.selectedTenant.id:1},a=this;this.$store.dispatch("role/getRole",t).then((function(e){a.role=e,(1==a.role.isStatic&&(!1===a.isHostTenant||null!==a.selectedTenant&&null==a.selectedTenant.id)||!0===abp.auth.hasPermission("Pages.RoleManagement.Read")&&!1===abp.auth.hasPermission("Pages.RoleManagement.Create")&&!1===abp.auth.hasPermission("Pages.RoleManagement.Update"))&&a.$nextTick((function(){a.disableControls()})),a.isLoad=!1})).catch((function(e){a.isLoad=!1}))},getPermissions:function(){this.isLoad=!0;var e={tenantId:this.isHostTenant?this.selectedTenant.id:1},t=this;this.$store.dispatch("role/getPermissions",e).then((function(e){t.role=d({},t.role,{permissions:e}),t.checkIsValid(),t.isLoad=!1})).catch((function(e){t.isLoad=!1}))},cancelRole:function(){this.$router.replace({name:"role"})},checkIsValid:function(){for(var e=[],t=this.$refs.formRole.elements,a=0;a<t.length;a++){var s=t[a];"INPUT"===s.tagName&&(s.validity.valid||e.push(s.id)),"TEXTAREA"===s.tagName&&(s.validity.valid||e.push(s.id))}e.length>0?(this.IsNotValid=!0,this.navigationElements.forEach((function(t){var a=e.find((function(e){return e==t.id}));t.isValid=void 0===a}))):(this.IsNotValid=!1,this.navigationElements.forEach((function(e){e.isValid=!0})))},saveRole:function(){if(this.$refs.formRole.checkValidity()){this.isLoad=!0;var e={id:this.role.id,isDefault:this.role.isDefault,isStatic:this.role.isStatic,tenantId:this.role.tenantId,name:this.role.name,displayName:this.role.displayName,description:this.role.description,permissions:this.role.permissions},t=this;void 0===this.role.id?this.$store.dispatch("role/createRole",e).then((function(e){t.$notify("success filled","Zapis roli","Rola '".concat(t.role.name,"' został zapisana prawidłowo"),{duration:3e3,permanent:!1}),t.isLoad=!1,t.$router.replace({name:"role"})})).catch((function(e){t.isLoad=!1})):this.$store.dispatch("role/updateRole",e).then((function(e){t.isLoad=!1,t.$notify("success filled","Zapis rola","Rola '".concat(t.role.name,"' został zapisana prawidłowo"),{duration:3e3,permanent:!1}),t.$router.replace({name:"role"})})).catch((function(e){t.isLoad=!1}))}else this.$notify("error filled","Błąd zapisu","Nie wszystkie wymagane pola zostały wypełnione!",{duration:3e3,permanent:!1})},disableControls:function(){for(var e=this.$refs.formRole.elements,t=0;t<e.length;t++){e[t].disabled=!0}}},computed:d({},Object(i.b)({selectedTenant:"role/getCookieTenant"}),{isHostTenant:function(){return null===abp.session.tenantId}}),mounted:function(){var e=Object(s.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"rola_dodaj"==this.$route.name?(this.typeNav="dodaj",this.role.tenantId=this.isHostTenant?this.selectedTenant.id:1,this.getPermissions()):"rola_edytuj"==this.$route.name&&(this.typeNav="edytuj",this.getRole(this.$route.params.roleId));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),watch:{role:{handler:function(e,t){var a=this;this.$nextTick((function(){a.checkIsValid()}))},deep:!0}},components:{Switches:o.a}},c=(a("ae2b"),a("2877")),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rolePage"},[e.isLoad?a("div",{staticClass:"loading"}):e._e(),e._v(" "),a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("piaf-breadcrumb")],1)],1),e._v(" "),e.isHostTenant?a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-dark"},[a("div",{staticClass:"align-self-center"},[a("p",{staticClass:"mb-0"},[e._v("\n            "+e._s(e._f("l")("Wybrany rodzaj"))+": "),a("b",[e._v(e._s(void 0!==e.selectedTenant?e.selectedTenant.name:"brak"))])])])])])],1):e._e(),e._v(" "),a("b-row",{staticClass:"users-content"},[a("b-colxx",{attrs:{xs:"12",lg:"4",xl:"3"}},[a("b-card",{staticClass:"w-100 shadow-none",attrs:{"no-body":""}},[a("div",{staticClass:"card-body p-0"},[a("b-colxx",{staticClass:"p-0 pt-1 menu-border",attrs:{xxs:"12"}},[a("b-nav",{staticClass:"w-100 navigationBox"},e._l(e.navigationElements.filter((function(t){return t.type.some((function(t){return t==e.typeNav}))})),(function(t,s){return a("b-nav-item",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],key:s,class:[!t.isValid&&"invalid-item"],attrs:{active:e.currentNav===t.id,title:t.name},on:{click:function(a){e.currentNav=t.id}}},[a("span",{staticClass:"d-block d-lg-none"},[a("i",{staticClass:"fa",class:t.icon,attrs:{"aria-hidden":"true"}})]),e._v(" "),a("span",{staticClass:"d-none d-lg-block"},[a("i",{staticClass:"fa text-center",class:t.icon,attrs:{"aria-hidden":"true"}}),e._v("\n                  "+e._s(t.name)+"\n                ")])])})),1)],1)],1)])],1),e._v(" "),a("b-colxx",{attrs:{xs:"12",lg:"8",xl:"9"}},[a("b-form",{ref:"formRole",attrs:{id:"formRole"},on:{submit:function(t){return t.preventDefault(),e.saveRole(t)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"dane_roli"===e.currentNav,expression:"currentNav === 'dane_roli'"}]},[a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-dark pt-3"},[a("div",{staticClass:"align-self-center"},[a("h6",{staticClass:"mb-0"},[e._v("\n                 "+e._s(e._f("l")("Dane roli"))+"\n                  ")])])])])],1),e._v(" "),a("b-row",{staticClass:"pt-3"},[a("b-colxx",{attrs:{xs:"12",md:"6"}},[a("b-form-group",{attrs:{label:e._f("l")("Kod roli")}},[a("b-form-input",{attrs:{id:"dane_roli",disabled:e.role.isStatic||"edytuj"===e.typeNav,name:e._f("l")("Kod roli"),required:"",placeholder:e._f("l")("Kod roli"),type:"text"},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xs:"12",md:"6"}},[a("b-form-group",{attrs:{label:e._f("l")("Nazwa roli")}},[a("b-form-input",{attrs:{id:"dane_roli",name:e._f("l")("Nazwa roli"),required:"",placeholder:e._f("l")("Nazwa roli"),type:"text"},model:{value:e.role.displayName,callback:function(t){e.$set(e.role,"displayName",t)},expression:"role.displayName"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xs:"12"}},[a("b-form-group",{attrs:{label:e._f("l")("Opis roli")}},[a("b-form-textarea",{attrs:{id:"dane_roli",name:e._f("l")("Opis roli"),required:"",placeholder:e._f("l")("Opis roli"),type:"text",rows:"3","max-rows":"4"},model:{value:e.role.description,callback:function(t){e.$set(e.role,"description",t)},expression:"role.description"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xs:"12"}},[a("b-form-group",[a("b-form-group",{attrs:{label:e._f("l")("Domyślny")}},[a("div",{staticClass:"d-flex align-items-center"},[a("switches",{staticClass:"mb-0",attrs:{theme:"custom",color:"primary-inverse"},model:{value:e.role.isDefault,callback:function(t){e.$set(e.role,"isDefault",t)},expression:"role.isDefault"}}),e._v(" "),a("p",{staticClass:"mb-0 pl-2",staticStyle:{cursor:"pointer"}},[e.role.isDefault?a("span",[e._v(e._s(e._f("l")("tak")))]):a("span",[e._v(e._s(e._f("l")("nie")))])])],1)]),e._v(" "),a("span",[e._v(e._s(e._f("l")("Domyślnie przypisuj do nowych użytkowników")))])],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"uprawnienia"===e.currentNav,expression:"currentNav === 'uprawnienia'"}]},[a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-dark pt-3"},[a("div",{staticClass:"align-self-center"},[a("h6",{staticClass:"mb-0"},[e._v("\n                    "+e._s(e._f("l")("Uprawnienia"))+"\n                  ")])])])])],1),e._v(" "),e.role.permissions.length?a("div",[a("b-row",{staticClass:"pt-3"},[a("b-colxx",{attrs:{xxs:"12"}},[a("table",{staticClass:"table b-table table-striped table-bordered border responsive d-block"},[a("thead",{staticClass:"bg-primary"},[a("tr",[a("th",[e._v(e._s(e._f("l")("Uprawnienia")))]),e._v(" "),e._l(e.permissionsType,(function(t,s){return a("th",{key:s},[e._v("\n                        "+e._s(e.L(t.name))+"\n                      ")])}))],2)]),e._v(" "),a("tbody",e._l(e.role.permissions.filter((function(e){return"configurable"==e.type})),(function(t,s){return a("tr",{key:s},[a("td",[e._v(e._s(e.L(t.name)))]),e._v(" "),e._l(e.permissionsType,(function(s,r){return a("td",{key:r,attrs:{align:"center"}},[a("b-form-checkbox-group",{model:{value:t.permissionsType,callback:function(a){e.$set(t,"permissionsType",a)},expression:"item.permissionsType"}},[a("b-form-checkbox",{staticClass:"m-0",attrs:{id:s.id,value:s.id}})],1)],1)}))],2)})),0),e._v(" "),a("thead",{staticClass:"bg-primary"},[a("tr",[a("th",[e._v(e._s(e._f("l")("Uprawnienia")))]),e._v(" "),a("th",{attrs:{colspan:"4"}},[e._v("\n                        View\n                      ")])])]),e._v(" "),a("tbody",e._l(e.role.permissions.filter((function(e){return"simple"==e.type})),(function(t,s){return a("tr",{key:s},[a("td",[e._v(e._s(e.L(t.name)))]),e._v(" "),a("td",{attrs:{align:"center",colspan:"4"}},[a("b-form-checkbox-group",{model:{value:t.permissionsType,callback:function(a){e.$set(t,"permissionsType",a)},expression:"item.permissionsType"}},[a("b-form-checkbox",{staticClass:"m-0",attrs:{value:"view"}})],1)],1)])})),0)])])],1)],1):a("b-row",[a("b-colxx",{attrs:{xs:"12"}},[a("b-card",{staticClass:"my-2 d-flex flex-row",attrs:{"no-body":""}},[a("div",{staticClass:"d-flex flex-grow-1 min-width-zero"},[a("div",{staticClass:"card-body"},[e._v("\n                    "+e._s(e._f("l")("Brak uprawnień dla wybranej roli"))+"\n                  ")])])])],1)],1)],1)])],1)],1),e._v(" "),a("b-row",[a("b-colxx",{staticClass:"py-2",attrs:{xs:"12"}},[a("b-alert",{attrs:{show:"",variant:"danger"}},[e._v("\n        "+e._s(e._f("l")("Jeśli zmieniasz własne uprawnienia, może być konieczne odświeżenie strony (F5), aby zastosować zmiany uprawnień na własnym ekranie!"))+"\n      ")])],1),e._v(" "),a("b-colxx",{staticClass:"border-top border-dark py-3 d-flex justify-content-end",attrs:{xxs:"12"}},[a("b-button",{staticClass:"mr-2",attrs:{type:"button",variant:"outline-primary"},on:{click:function(t){return t.preventDefault(),e.cancelRole()}}},[e._v("\n        "+e._s(e._f("l")("Anuluj"))+"\n      ")]),e._v(" "),a("b-button",{attrs:{type:"submit",variant:"primary",form:"formRole",disabled:e.IsNotValid}},[e._v("\n        "+e._s(e._f("l")("Zapisz"))+"\n      ")])],1)],1)],1)}),[],!1,null,"83d95a3a",null);t.default=u.exports},"55d1":function(e,t,a){"use strict";a.r(t);var s=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),r=(a("7f7f"),a("96cf"),a("3b8d")),o=a("d30a"),i=(a("5d4a"),a("2f62")),n=a("4df8");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}var l={data:function(){return{isLoad:!0,modalData:{},pageSizes:[5,10,20],pageSize:10,editButtons:[{hint:"Edytuj użytkownika",icon:"edit",onClick:this.editClick},{hint:"Usuń użytkownika",icon:"trash",onClick:this.deleteClick}],deleteModalTitle:"",deleteObject:{},tenants:[{id:null,name:"HOST"},{id:1,name:"USER"}],tenantObject:{id:null,name:"HOST"}}},methods:{getUsers:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("user/getAllUsers");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),showType:function(e){return 0===e.value?"Administrator":1===e.value?"B2C":"B2B"},changeSelectedTenant:function(){this.selectedTenant=this.tenantObject,this.$notify("success filled","Wybór rodzaju","Zarządzasz uprawnieniami dla ".concat(this.tenantObject.name),{duration:3e3,permanent:!1})},onToolbarPreparing:function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"add",onClick:this.createClick}})},createClick:function(e){this.$router.push({path:"uzytkownik/dodaj"})},editClick:function(e){this.$router.push({path:"uzytkownik/edytuj/".concat(e.row.data.id)})},deleteClick:function(e){this.deleteModalTitle="Potwierdzenie usunięcia konta użytkownika ".concat(e.row.data.userName),this.deleteObject=e.row.data,this.$refs.modalDelete.show()},confirmDelete:function(){var e=this;this.isLoad=!0;var t={Id:this.deleteObject.id};this.$store.dispatch("user/deleteUser",t).then((function(t){e.$refs.modalDelete.hide(),e.$notify("success filled","Potwierdzenie","Konto użytkownika ".concat(e.deleteObject.userName," zostało usunięte"),{duration:3e3,permanent:!1}),e.getUsers(),e.isLoad=!1})).catch((function(e){this.isLoad=!1}))},hideModal:function(e){this.$refs[e].hide()}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(i.b)({users:"user/getUserList",totalCount:"user/getTotalCount",dxLoading:"user/getLoading",loggedUser:"getLoggedUser",tenant:"role/getCookieTenant"}),{usersToEdit:function(){var e=this;return this.isHostTenant&&null!==this.tenant?this.users.filter((function(t){return t.tenantId===e.tenant.id})):this.users},isHostTenant:function(){return null===abp.session.tenantId},selectedTenant:{get:function(){return null==abp.utils.getCookieValue("Abp.Tenant.Selected")?{id:null,name:"HOST"}:JSON.parse(abp.utils.getCookieValue("Abp.Tenant.Selected"))},set:function(e){this.$store.commit("role/setCookieTenant",e)}}}),created:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getUsers(),null!==this.tenant?this.tenantObject=this.tenant:this.$store.commit("role/setCookieTenant",{id:null,name:"HOST"});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),watch:{users:function(e){this.isLoad=!1},dxLoading:function(e){this.isLoad=e}},components:{DxDataGrid:o.DxDataGrid,DxColumn:o.DxColumn,DxEditing:o.DxEditing,DxButton:o.DxButton,DxPager:o.DxPager,DxPaging:o.DxPaging,DxSearchPanel:o.DxSearchPanel,DxSummary:o.DxSummary,DxTotalItem:o.DxTotalItem,DxLoadPanel:o.DxLoadPanel,vSelectComponent:n.a}},c=a("2877"),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isLoad?a("div",{staticClass:"loading"}):e._e(),e._v(" "),a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("piaf-breadcrumb")],1)],1),e._v(" "),a("b-row",[e.isHostTenant?a("b-colxx",{attrs:{xxs:"12",sm:"6",md:"4"}},[a("b-form-group",{staticClass:"mb-0 pb-0",attrs:{label:"Wybrany rodzaj:"}},[a("vSelectComponent",{attrs:{options:e.tenants,label:"name",requiredForm:"",placeholder:"Wybierz rodzaj"},on:{input:e.changeSelectedTenant},model:{value:e.tenantObject,callback:function(t){e.tenantObject=t},expression:"tenantObject"}}),e._v(" "),a("small",[e._v("Wybierz typ uprawnień w celu zarządzania użytkownikami")])],1)],1):e._e()],1),e._v(" "),a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("dx-data-grid",{attrs:{"data-source":e.usersToEdit,noDataText:"Brak danych...","show-row-lines":!0,"column-hiding-enabled":!0,"remote-operations":!0,"row-alternation-enabled":!0,columnAutoWidth:!0},on:{"toolbar-preparing":function(t){return e.onToolbarPreparing(t)}}},[a("dx-load-panel",{attrs:{enabled:!1}}),e._v(" "),a("dx-search-panel",{attrs:{visible:!0,width:250,placeholder:"Szukaj..."}}),e._v(" "),a("dx-paging",{attrs:{"page-size":e.pageSize}}),e._v(" "),a("dx-pager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":e.pageSizes,"show-info":!0,infoText:"Strona {0} z {1} dostępnych ({2} pozycji)"}}),e._v(" "),a("dx-column",{attrs:{buttons:e.editButtons,type:"buttons"}}),e._v(" "),a("dx-column",{attrs:{caption:"Użytkownik","allow-editing":!1,"data-field":"userName"}}),e._v(" "),a("dx-column",{attrs:{caption:"Typ",visible:e.isHostTenant,"allow-editing":!1,"data-field":"tenantName"}}),e._v(" "),a("dx-column",{attrs:{caption:"Rola","allow-editing":!1,"data-field":"type","customize-text":e.showType}}),e._v(" "),a("dx-column",{attrs:{caption:"Adres e-mail","allow-editing":!1,"data-field":"emailAddress"}}),e._v(" "),a("dx-column",{attrs:{caption:"Data utworzenia","allow-editing":!1,"data-field":"creationTime","data-type":"date",format:"yyyy-MM-dd HH:mm:ss"}}),e._v(" "),a("dx-column",{attrs:{caption:"Aktywny","allow-editing":!1,"data-field":"isActive"}}),e._v(" "),a("dx-column",{attrs:{caption:"Kod kontrahenta","allow-editing":!1,"data-field":"contractorCode"}}),e._v(" "),a("dx-column",{attrs:{caption:"Adres dostawy","allow-editing":!1,"data-field":"isRecipientsExists"}}),e._v(" "),a("dx-summary",[a("dx-total-item",{attrs:{column:"typ","summary-type":"count",displayFormat:"Ilość: {0}"}})],1)],1)],1)],1),e._v(" "),a("b-modal",{ref:"modalDelete",attrs:{id:"modalDelete",size:"md",title:e.deleteModalTitle,centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""}},[a("b-form",{ref:"formDelete",attrs:{id:"formDelete"},on:{submit:function(t){return t.preventDefault(),e.confirmDelete(t)}}},[a("b-row",[a("b-colxx",{attrs:{xs:"12"}},[a("h6",[e._v("Czy chcesz usunąć konto?")])])],1)],1),e._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{staticClass:"squared",attrs:{type:"button",variant:"outline-primary"},on:{click:function(t){return e.hideModal("modalDelete")}}},[e._v("Nie")]),e._v(" "),a("b-button",{staticClass:"squared",attrs:{type:"submit",variant:"primary",form:"formDelete"}},[e._v("Tak")])],1)],2)],1)}),[],!1,null,null,null);t.default=u.exports},"5c47":function(e,t,a){"use strict";var s=a("bd86"),r={name:"switches",props:{typeBold:{default:!1},value:{default:!1},disabled:{default:!1},label:{default:""},textEnabled:{default:""},textDisabled:{default:""},color:{default:"default"},theme:{default:"default"},emitOnMount:{default:!0}},mounted:function(){this.emitOnMount&&this.$emit("input",this.value)},methods:{trigger:function(e){this.$emit("input",e.target.checked)}},computed:{classObject:function(){var e,t=this.color,a=this.value,r=this.theme,o=this.typeBold,i=this.disabled;return e={"vue-switcher":!0},Object(s.a)(e,"vue-switcher--unchecked",!a),Object(s.a)(e,"vue-switcher--disabled",i),Object(s.a)(e,"vue-switcher--bold",o),Object(s.a)(e,"vue-switcher--bold--unchecked",o&&!a),Object(s.a)(e,"vue-switcher-theme--".concat(r),t),Object(s.a)(e,"vue-switcher-color--".concat(t),t),e},shouldShowLabel:function(){return""!==this.label||""!==this.textEnabled||""!==this.textDisabled}}},o=(a("1798"),a("2877")),i=Object(o.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{class:e.classObject},[e.shouldShowLabel?a("span",{staticClass:"vue-switcher__label"},[e.label?a("span",{domProps:{textContent:e._s(e.label)}}):e._e(),e._v(" "),!e.label&&e.value?a("span",{domProps:{textContent:e._s(e.textEnabled)}}):e._e(),e._v(" "),e.label||e.value?e._e():a("span",{domProps:{textContent:e._s(e.textDisabled)}})]):e._e(),e._v(" "),a("input",{attrs:{type:"checkbox",disabled:e.disabled},domProps:{checked:e.value},on:{change:e.trigger}}),e._v(" "),a("div")])}),[],!1,null,null,null);t.a=i.exports},"5d61":function(e,t,a){},"6dfc":function(e,t,a){},ae2b:function(e,t,a){"use strict";var s=a("fa24");a.n(s).a},c6af:function(e,t,a){"use strict";a.r(t);var s=(a("8e6e"),a("bd86")),r=(a("c5f6"),a("28a5"),a("456d"),a("a481"),a("7514"),a("7f7f"),a("ac6a"),a("96cf"),a("3b8d")),o=a("5c47"),i=a("2f62"),n={props:["display","data","iscurrentPassword","passwordModalType","passwordModalTitle"],data:function(){return{isLoad:!1}},methods:{hideModal:function(e){this.$refs[e].hide()},saveChangePassword:function(){this.$emit("saveChanges",this.data)}},computed:{activeModal:{get:function(){return this.display,this.display},set:function(e){this.$emit("changeDisplayModal",e)}}}},d=a("2877"),l=Object(d.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-modal",{ref:"modalChangePassword",attrs:{id:"modalChangePassword",size:"lg",title:e.passwordModalTitle,centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""},model:{value:e.activeModal,callback:function(t){e.activeModal=t},expression:"activeModal"}},[a("b-form",{ref:"formChangePassword",attrs:{id:"formChangePassword"},on:{submit:function(t){return t.preventDefault(),e.saveChangePassword(t)}}},[a("b-row",["zmiana"===e.passwordModalType?[a("b-colxx",{attrs:{xs:"12"}},[e._v("\n                    Po zmianie hasła zostanie wysłana wiadomość potwierdzająca zmianę na adres e-mail użytkownika.\n                ")]),e._v(" "),a("b-colxx",{attrs:{xxs:"12"}},[a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("b-form-group",{attrs:{label:"Aktualne hasło"}},[a("b-form-input",{attrs:{required:"",placeholder:"Hasło",type:"password"},model:{value:e.data.currentPassword,callback:function(t){e.$set(e.data,"currentPassword",t)},expression:"data.currentPassword"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12"}},[a("b-form-group",{attrs:{label:"Nowe hasło"}},[a("b-form-input",{attrs:{required:"",placeholder:"Hasło",type:"password"},model:{value:e.data.newPassword,callback:function(t){e.$set(e.data,"newPassword",t)},expression:"data.newPassword"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12"}},[a("b-form-group",{attrs:{label:"Powtórz nowe hasło"}},[a("b-form-input",{attrs:{required:"",placeholder:"Hasło",type:"password"},model:{value:e.data.repeatPassword,callback:function(t){e.$set(e.data,"repeatPassword",t)},expression:"data.repeatPassword"}})],1)],1)],1)],1)]:[a("b-colxx",{attrs:{xs:"12"}},[e._v("\n                    Zresetowanie hasła spowoduje wygenerowanie nowego hasła oraz wysłanie wiadomości potwierdzającej zmianę na adres e-mail użytkownika.\n                ")])],e._v(" "),e.data.newPassword!==e.data.repeatPassword?a("b-colxx",{attrs:{xxs:"12"}},[a("span",{staticClass:"text-danger font-weight-bold"},[e._v("Hasła nie są do siebie podobne!")])]):e._e()],2)],1),e._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{staticClass:"squared",attrs:{type:"button",variant:"outline-primary"},on:{click:function(t){e.activeModal=!1}}},[e._v("Anuluj")]),e._v(" "),a("b-button",{staticClass:"squared",attrs:{type:"submit",variant:"primary",disabled:e.data.newPassword!==e.data.repeatPassword,form:"formChangePassword"}},[e._v(e._s("zmiana"===e.passwordModalType?"Zapisz":"Resetuj"))])],1)],2)}),[],!1,null,null,null).exports,c=(a("20d6"),a("4df8"));function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}var p={components:{Switches:o.a,vSelectComponent:c.a},props:["data","type","titleHeader","titleCreate","userId","selected","page","selectedAddress","countries"],data:function(){return{isLoad:!1,deleteModalTitle:"",deleteObject:{},addressModel:{},addressModalTitle:"",selectedAddressId:"",tempAddressId:0}},mounted:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.selectedAddressId=this.selectedAddress;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),methods:{toggleAddressModal:function(e,t){0!==Object.keys(e).length?(this.addressModalTitle=" Edycja adresu dla "+e.name+" "+e.surname,this.addressModel=Object.assign({},e),this.addressModel.type=t):(this.addressModalTitle="Dodanie nowego adresu",this.addressModel={},this.addressModel.type=t),this.$refs.modalAddress.show()},selectAddress:function(e){!0===this.selected&&(this.selectedAddressId=e.id,this.$emit("changeSelectAddress",this.selectedAddressId,this.type),this.$notify("success filled","Dane do dostawy zostały zmienione"))},deleteClick:function(e){this.deleteModalTitle="Potwierdzenie usunięcia adresu",this.deleteObject=e,this.$refs.modalDelete.show()},confirmDelete:function(){var e=this;this.isLoad=!0,this.$emit("changeIsLoad",!0);var t={Id:this.deleteObject.id};if(null!==this.userId&&void 0!==this.userId){var a=this;this.$store.dispatch("address/delete",t).then((function(e){a.$refs.modalDelete.hide(),a.$notify("success filled","Potwierdzenie","Adres został usunięty",{duration:3e3,permanent:!1}),void 0!==a.page&&null!==a.page?a.$emit("finishedWithLogin"):a.$emit("finished"),a.$emit("changeIsLoad",!1)})).catch((function(e){a.$emit("changeIsLoad",!1)}))}else{var s=this.data.findIndex((function(t){return t.id===e.deleteObject.id}));-1!==s&&(this.data.splice(s,1),this.$notify("success filled","Usuwanie adresu","Adres ".concat(this.deleteObject.name," został usuniety"),{duration:3e3,permanent:!1}),this.$emit("finishedWithOutLogin",this.data),this.$refs.modalDelete.hide(),this.$emit("changeIsLoad",!1))}},hideModal:function(e){this.$refs[e].hide()},saveAddress:function(){var e=this;if(this.$emit("changeIsLoad",!0),this.$refs.formAddress.checkValidity())if(null!==this.userId&&void 0!==this.userId){this.addressModel.userId=this.userId;var t=this.addressModel,a=this;this.addressModel.id?this.$store.dispatch("profile/createRecipientAddress",t).then((function(e){a.$notify("success filled","Zapis adresu dostawy","Adres dostawy <b>".concat(a.addressModel.name," ").concat(a.addressModel.surname,"</b> został zapisany prawidłowo"),{duration:3e3,permanent:!1}),a.$emit("changeIsLoad",!1),a.$refs.modalAddress.hide(),void 0!==a.page&&null!==a.page?a.$emit("finishedWithLogin"):a.$emit("finished")})).catch((function(e){a.$notify("error filled","Błąd podczas zapisu adres dostawy <b>".concat(a.addressModel.name," ").concat(a.addressModel.surname,"</b>"),e.message,{duration:3e3,permanent:!1}),a.$emit("changeIsLoad",!1)})):this.$store.dispatch("profile/createRecipientAddress",t).then((function(e){a.$notify("success filled","Zapis adresu dostawy","Adres dostawy <b>".concat(a.addressModel.name," ").concat(a.addressModel.surname,"</b> został dodany prawidłowo"),{duration:3e3,permanent:!1}),a.$emit("changeIsLoad",!1),a.$refs.modalAddress.hide(),void 0!==a.page&&null!==a.page?a.$emit("finishedWithLogin"):a.$emit("finished")})).catch((function(e){a.$notify("error filled","Błąd podczas dodawania adresu dostawy <b>".concat(a.addressModel.name," ").concat(a.addressModel.surname,"</b>"),e.message,{duration:3e3,permanent:!1}),a.$emit("changeIsLoad",!1)}))}else this.addressModel.id?(this.data.splice(this.data.findIndex((function(t){return t.id===e.addressModel.id})),1,this.addressModel),this.$notify("success filled","Zapis adresu dostawy","Adres dostawy <b>".concat(this.addressModel.name," ").concat(this.addressModel.surname,"</b> został zapisany prawidłowo"),{duration:3e3,permanent:!1})):(this.addressModel.id=Math.floor(1e3*Math.random())+1,this.data.push(this.addressModel),this.$notify("success filled","Zapis adresu dostawy","Adres dostawy <b>".concat(this.addressModel.name," ").concat(this.addressModel.surname,"</b> został zapisany prawidłowo"),{duration:3e3,permanent:!1})),this.$emit("finishedWithOutLogin",this.data),this.$refs.modalAddress.hide(),this.$emit("changeIsLoad",!1);else this.$notify("error filled","Błąd zapisu","Nie wszystkie wymagane pola zostały wypełnione!",{duration:3e3,permanent:!1})},getFullAddress:function(e){var t="";return e.city&&(t+="".concat(e.city," ")),e.street&&(t+=", ul. ".concat(e.street," ")),e.houseNumber&&(t+="".concat(e.houseNumber)),e.apartmentNumber&&(t+=" / ".concat(e.apartmentNumber)),t},getPostalData:function(e){var t="";return e.postalCode&&(t+="".concat(e.postalCode)),e.postOffice&&(t+=" ".concat(e.postOffice)),t}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(i.b)({loggedUser:"getLoggedUser"})),watch:{"addressModel.kind":function(e){e?(this.addressModel.name="",this.addressModel.surname=""):(this.addressModel.companyName="",this.addressModel.nip="")}}},m=Object(d.a)(p,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-colxx",{staticClass:"mb-3 addressModal",attrs:{xxs:"12"}},[a("b-row",[a("b-colxx",{staticClass:"text-primary",attrs:{xxs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-primary"},["shoppingCart"!==e.page||"shoppingCart"===e.page&&"dostawa"===e.type?["shoppingCart"===e.page?a("div",{staticClass:"icon"},[a("i",{staticClass:"fas fa-address-card fa-2x mr-2"})]):e._e(),e._v(" "),a("div",{staticClass:"align-self-center"},["shoppingCart"!==e.page?a("h6",{staticClass:"mb-0"},[e._v(e._s(e.titleHeader))]):e._e(),e._v(" "),"shoppingCart"===e.page?a("h3",{staticClass:"mb-0"},[e._v(e._s(e.titleHeader))]):e._e()])]:e._e(),e._v(" "),a("div",{staticClass:"align-self-center ml-auto"},[a("p",{staticClass:"mb-0",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.toggleAddressModal({},e.type)}}},[a("i",{staticClass:"fas fa-plus"}),e._v(" "+e._s(e.titleCreate))])])],2)]),e._v(" "),a("b-colxx",{attrs:{xxs:"12"}},[e.data&&e.data.filter((function(t){return t.type===e.type})).length>0?a("b-row",e._l(e.data.filter((function(t){return t.type===e.type})),(function(t,s){return a("b-colxx",{key:s,attrs:{xxs:"12",md:"6"}},[a("b-card",{class:{"my-2":!0,"address-card":!0,active:t.id===e.selectedAddressId!=""},attrs:{"no-body":""}},[a("b-card-body",{staticClass:"py-3 address-card-body",on:{click:function(a){return e.selectAddress(t)}}},[t.id===e.selectedAddressId?a("div",{staticClass:"selected-address"},[a("i",{staticClass:"fas fa-check fa-2x text-primary"})]):e._e(),e._v(" "),a("h5",{staticClass:"title"},[e._v("\n                         "+e._s(t.companyName||t.name+" "+t.surname)+"\n                       ")]),e._v(" "),a("ul",{staticClass:"fa-ul ml-3 mb-0"},[e.getFullAddress(t)?a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),e._v("\n                           "+e._s(e.getFullAddress(t))+"\n                           ")]):e._e(),e._v(" "),e.getPostalData(t)?a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),e._v("\n                           "+e._s(e.getPostalData(t))+"\n                         ")]):e._e(),e._v(" "),t.nip?a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),e._v("\n                           "+e._s(e._f("l")("NIP"))+": "+e._s(t.nip)+"\n                         ")]):e._e(),e._v(" "),t.phone?a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),e._v("\n                           Tel.: "+e._s(t.phone)+"\n                         ")]):e._e(),e._v(" "),t.email?a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),e._v("\n                           E-mail: "+e._s(t.email)+"\n                         ")]):e._e()])]),e._v(" "),a("b-card-footer",{staticClass:"p-1 bg-white"},[a("div",{staticClass:"float-right"},[e.selected?a("b-button",{attrs:{variant:"outline-primary",size:"sm",type:"button"},on:{click:function(a){return e.deleteClick(t)}}},[e._v("usuń")]):e._e(),e._v(" "),a("b-button",{attrs:{variant:"outline-primary",size:"sm",type:"button"},on:{click:function(a){return e.toggleAddressModal(t,e.type)}}},[e._v("edytuj")])],1)])],1)],1)})),1):a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("b-card",{staticClass:"my-2 d-flex flex-row",attrs:{"no-body":""}},[a("div",{staticClass:"d-flex flex-grow-1 min-width-zero"},[a("div",{staticClass:"card-body"},[e._v("\n                             "+e._s(e._f("l")("Brak dostępnych adresów"))+"\n                         ")])])])],1)],1)],1)],1),e._v(" "),a("b-modal",{ref:"modalAddress",attrs:{id:"modalAddress",size:"lg",title:e.addressModalTitle,centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""}},[a("b-form",{ref:"formAddress",attrs:{validated:"",id:"formAddress"},on:{submit:function(t){return t.preventDefault(),e.saveAddress(t)}}},[a("b-row",[2===e.addressModel.type?a("b-colxx",{attrs:{xxs:"12"}},[a("b-form-group",[a("div",{staticClass:"d-flex align-items-center"},[a("switches",{staticClass:"mb-0",attrs:{theme:"custom",color:"primary-inverse"},model:{value:e.addressModel.kind,callback:function(t){e.$set(e.addressModel,"kind",t)},expression:"addressModel.kind"}}),e._v(" "),a("p",{staticClass:"mb-0 pl-2",staticStyle:{cursor:"pointer"}},[e.addressModel.kind?a("span",[e._v("Firma")]):a("span",[e._v("Osoba prywatna")])])],1)])],1):e._e(),e._v(" "),e.addressModel.kind?a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Nazwa firmy"}},[a("b-form-input",{attrs:{required:"",placeholder:"Nazwa firmy",type:"text"},model:{value:e.addressModel.companyName,callback:function(t){e.$set(e.addressModel,"companyName",t)},expression:"addressModel.companyName"}})],1)],1):e._e(),e._v(" "),e.addressModel.kind?a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:"NIP"}},[a("b-form-input",{attrs:{required:"",placeholder:"NIP",type:"text"},model:{value:e.addressModel.nip,callback:function(t){e.$set(e.addressModel,"nip",t)},expression:"addressModel.nip"}})],1)],1):e._e(),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Imię"}},[a("b-form-input",{attrs:{id:"name",required:1===e.addressModel.type||2===e.addressModel.type&&!e.addressModel.kind,placeholder:"Imię",type:"text"},model:{value:e.addressModel.name,callback:function(t){e.$set(e.addressModel,"name",t)},expression:"addressModel.name"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Nazwisko"}},[a("b-form-input",{attrs:{required:1===e.addressModel.type||2===e.addressModel.type&&!e.addressModel.kind,placeholder:"Nazwisko",type:"text"},model:{value:e.addressModel.surname,callback:function(t){e.$set(e.addressModel,"surname",t)},expression:"addressModel.surname"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12"}},[a("b-form-group",{attrs:{label:"Kraj"}},[a("vSelectComponent",{attrs:{requiredForm:"",options:e.countries,label:"name",placeholder:"Wybierz kraj"},model:{value:e.addressModel.country,callback:function(t){e.$set(e.addressModel,"country",t)},expression:"addressModel.country"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12"}},[a("b-form-group",{attrs:{label:"Miejscowość"}},[a("b-form-input",{attrs:{required:1===e.addressModel.type,placeholder:"Miejscowość",type:"text"},model:{value:e.addressModel.city,callback:function(t){e.$set(e.addressModel,"city",t)},expression:"addressModel.city"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"12",lg:"6"}},[a("b-form-group",{attrs:{label:"Ulica"}},[a("b-form-input",{attrs:{placeholder:"Ulica",type:"text"},model:{value:e.addressModel.street,callback:function(t){e.$set(e.addressModel,"street",t)},expression:"addressModel.street"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"6",md:"6",lg:"3"}},[a("b-form-group",{attrs:{label:"Numer domu"}},[a("b-form-input",{attrs:{required:1===e.addressModel.type,placeholder:"Numer domu",type:"text"},model:{value:e.addressModel.houseNumber,callback:function(t){e.$set(e.addressModel,"houseNumber",t)},expression:"addressModel.houseNumber"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"6",md:"6",lg:"3"}},[a("b-form-group",{attrs:{label:"Numer mieszkania"}},[a("b-form-input",{attrs:{placeholder:"Numer mieszkania",type:"text"},model:{value:e.addressModel.apartmentNumber,callback:function(t){e.$set(e.addressModel,"apartmentNumber",t)},expression:"addressModel.apartmentNumber"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Kod pocztowy"}},[a("b-form-input",{directives:[{name:"mask",rawName:"v-mask",value:"##-###",expression:"'##-###'"}],attrs:{required:1===e.addressModel.type,placeholder:"Kod pocztowy",type:"text"},model:{value:e.addressModel.postalCode,callback:function(t){e.$set(e.addressModel,"postalCode",t)},expression:"addressModel.postalCode"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Poczta"}},[a("b-form-input",{attrs:{required:1===e.addressModel.type,placeholder:"Poczta",type:"text"},model:{value:e.addressModel.postOffice,callback:function(t){e.$set(e.addressModel,"postOffice",t)},expression:"addressModel.postOffice"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Telefon"}},[a("b-form-input",{attrs:{required:1===e.addressModel.type||2===e.addressModel.type&&!e.addressModel.kind,placeholder:"Telefon",type:"text"},model:{value:e.addressModel.phone,callback:function(t){e.$set(e.addressModel,"phone",t)},expression:"addressModel.phone"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Adres e-mail"}},[a("b-form-input",{attrs:{required:"",placeholder:"Adres e-mail",type:"email"},model:{value:e.addressModel.email,callback:function(t){e.$set(e.addressModel,"email",t)},expression:"addressModel.email"}})],1)],1)],1)],1),e._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{staticClass:"squared mr-1",attrs:{type:"button",variant:"outline-primary"},on:{click:function(t){return e.hideModal("modalAddress")}}},[e._v("Anuluj")]),e._v(" "),a("b-button",{staticClass:"squared",attrs:{type:"submit",variant:"primary",form:"formAddress"}},[e._v("Zapisz")])],1)],2),e._v(" "),a("b-modal",{ref:"modalDelete",attrs:{id:"modalDelete",size:"md",title:e.deleteModalTitle,centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""}},[a("b-form",{ref:"formDelete",attrs:{id:"formDelete"},on:{submit:function(t){return t.preventDefault(),e.confirmDelete(t)}}},[a("b-row",[a("b-colxx",{attrs:{xs:"12"}},[a("h6",[e._v("Czy chcesz usunąć adres?")])])],1)],1),e._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{staticClass:"squared mr-1",attrs:{type:"button",variant:"outline-primary"},on:{click:function(t){return e.hideModal("modalDelete")}}},[e._v("Nie")]),e._v(" "),a("b-button",{staticClass:"squared",attrs:{type:"submit",variant:"primary",form:"formDelete"}},[e._v("Tak")])],1)],2)],1)}),[],!1,null,null,null).exports,f=a("c607"),h=a("d30a");function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}a("5d4a");var v={props:["display","data"],data:function(){return{editButtons:[{hint:"Wybierz",icon:"selectall",onClick:this.saveContractor}]}},mounted:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$emit("changeLoader",!0),e.next=3,this.getContractors();case 3:this.$nextTick((function(){t.$emit("changeLoader",!1)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),methods:{getContractors:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$emit("changeLoader",!0),t=this,e.next=4,this.$store.dispatch("contractor/getAll").then((function(e){t.$emit("changeLoader",!1)})).catch((function(e){t.$emit("changeLoader",!1)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),saveContractor:function(e){this.$emit("saveChanges",e.row.data)}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(i.b)({contractors:"contractor/getAllContractors",totalCount:"contractor/getTotalCount",pageSize:"contractor/getPageSize",pageSizes:"contractor/getPageSizes",dxLoading:"contractor/getLoading",currentPage:"contractor/getCurrentPage"}),{activeModal:{get:function(){return this.display},set:function(e){this.$emit("changeDisplayModal",e)}}}),watch:{dxLoading:function(e){this.$emit("changeLoader",e)}},components:{DxDataGrid:h.DxDataGrid,DxColumn:h.DxColumn,DxEditing:h.DxEditing,DxButton:h.DxButton,DxPager:h.DxPager,DxPaging:h.DxPaging,DxSearchPanel:h.DxSearchPanel,DxSummary:h.DxSummary,DxTotalItem:h.DxTotalItem,DxLoadPanel:h.DxLoadPanel}},y=Object(d.a)(v,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-modal",{ref:"modalContractor",attrs:{id:"modalContractor",size:"big",title:"Zarządzaj kontrahentem",centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""},model:{value:e.activeModal,callback:function(t){e.activeModal=t},expression:"activeModal"}},[a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("dx-data-grid",{attrs:{"data-source":e.contractors,"show-borders":!0,"column-hiding-enabled":!0,columnAutoWidth:!0,"remote-operations":!0,noDataText:"Brak danych..."}},[a("dx-paging",{attrs:{enabled:!1}}),e._v(" "),a("dx-load-panel",{attrs:{enabled:!1}}),e._v(" "),a("dx-search-panel",{attrs:{visible:!0,width:250,placeholder:"Szukaj..."}}),e._v(" "),a("dx-paging",{attrs:{"page-size":e.pageSize}}),e._v(" "),a("dx-pager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":e.pageSizes,"show-info":!0,infoText:"Strona {0} z {1} dostępnych ({2} pozycji)"}}),e._v(" "),a("dx-column",{attrs:{buttons:e.editButtons,type:"buttons"}}),e._v(" "),a("dx-column",{attrs:{caption:"Nazwa",width:"50%","allow-editing":!1,"data-field":"name"}}),e._v(" "),a("dx-column",{attrs:{caption:"Kod",width:"20%","allow-editing":!1,"data-field":"code"}}),e._v(" "),a("dx-column",{attrs:{caption:"NIP",width:"20%","allow-editing":!1,"data-field":"nip"}})],1)],1)],1),e._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{staticClass:"ml-2",attrs:{type:"button",variant:"outline-primary"},on:{click:function(t){e.activeModal=!1}}},[e._v("Zamknij")])],1)],2)],1)}),[],!1,null,null,null).exports,x=a("d54f");function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}var g={props:["data"],data:function(){return{isLoad:!1,currentNav:"dane_konta",typeNav:"",navigationElements:[{type:["dodaj","edytuj"],id:"dane_konta",name:"Dane konta",isValid:!0,icon:"fa-user"},{type:["dodaj","edytuj"],id:"rola",name:"Rola oraz uprawnienia",isValid:!0,permission:"Pages.RoleManagement",icon:"fa-address-card"},{type:["dodaj","edytuj"],id:"adresy_dostaw",name:"Adresy dostaw",isValid:!0,icon:"fa-truck"},{type:["dodaj","edytuj"],id:"ustawienia",name:"Ustawienia konta",isValid:!0,icon:"fa-cog"},{type:["edytuj"],id:"zamowienia",name:"Zamówienia",isValid:!0,icon:"fa-book"},{type:["edytuj"],id:"dokumenty",name:"Dokumenty",isValid:!0,icon:"fa-file"}],addressModel:{},addressModalTitle:"",passwordModalTitle:"",passwordModalType:"",userAddresses:null,user:{id:void 0,role:{id:0},userAddresses:[],contractorId:void 0,active:!0,generatePassword:!1},permissionsType:[{id:"create",name:"Create"},{id:"update",name:"Update"},{id:"read",name:"Read"},{id:"delete",name:"Delete"}],roles:[],userRole:void 0,countries:[],selectedRole:void 0,configurations:[],passwordObject:{},IsNotValid:!1,isRoleGranted:!1,modalChangePasswordData:{},showChangePasswordModal:!1,modalAddressDeliveryData:{addresses:[]},modalAddressInvoiceData:{addresses:[]},userTypes:[],userType:null,showContractorModal:!1,selectedContractor:void 0,payments:[],selectedPayments:[],deliveries:[],selectedDeliveries:[]}},created:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoad=!0,this.navigationElements.forEach((function(e){void 0!==e.permission?abp.auth.hasPermission(e.permission)?e.isGrantedPermission=!0:e.isGrantedPermission=!1:e.isGrantedPermission=!0})),e.next=5,this.getPaymentMethods();case 5:return e.next=7,this.getDeliveryMethods();case 7:return e.next=9,this.getEnumValues("UserType");case 9:return e.next=11,this.getCountries();case 11:if(!abp.auth.hasPermission("Pages.RoleManagement")){e.next=14;break}return e.next=14,this.getRoleWithPermissions();case 14:if("uzytkownik_dodaj"!=this.$route.name){e.next=21;break}this.typeNav="dodaj",this.userType=void 0!==this.accountType?this.accountType:void 0,this.user.tenantId=this.isHostTenant?this.selectedTenant.id:1,this.$nextTick((function(){t.checkIsValid()})),e.next=25;break;case 21:if("uzytkownik_edytuj"!=this.$route.name){e.next=25;break}return this.typeNav="edytuj",e.next=25,this.getUser(this.$route.params.userId);case 25:return e.next=27,this.getContractorRecipients();case 27:this.$nextTick((function(){t.isLoad=!1}));case 28:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),watch:{userType:function(){var e=this;this.$nextTick((function(){e.checkIsValid()}))},selectedRole:function(e){var t=this;this.userRole=null==e?void 0:this.roles.find((function(t){return t.id==e.id})),this.$nextTick((function(){t.checkIsValid()}))},selectedPayments:function(e){var t=this;this.$nextTick((function(){t.checkIsValid()}))},selectedDeliveries:function(e){var t=this;this.$nextTick((function(){t.checkIsValid()}))},user:{handler:function(e,t){var a=this;this.$nextTick((function(){a.checkIsValid()}))},deep:!0}},methods:{getCountries:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.$store.dispatch("country/getCountries").then((function(e){t.countries=e}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getDeliveryMethods:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.$store.dispatch("delivery/getDeliveries").then((function(e){t.deliveries=e}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getContractorRecipients:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t,a,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoaded=!1,t={userId:this.user.id,tenantId:this.user.role.tenantId},a=this,e.next=5,this.$store.dispatch("profile/getContractorRecipients",t).then((function(e){s.user.userAddresses=e,a.isLoaded=!0})).catch((function(e){a.isLoaded=!1}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getPaymentMethods:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.$store.dispatch("payment/getPayments").then((function(e){t.payments=e}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),reloadUserContractor:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoad=!0,t={id:this.$route.params.userId,tenantId:this.user.tenantId},a=this,e.next=5,this.$store.dispatch("user/getUserContractor",t).then((function(e){a.user.contractor=e.contractor,a.user.recipients=e.recipients,a.selectedContractor=void 0!==a.user.contractor&&null!==a.user.contractor?"".concat(a.user.contractor.code," - ").concat(a.user.contractor.name):void 0,a.isLoad=!1}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),contractorValidate:function(e){e.preventDefault()},changeLoader:function(e){this.isLoad=e},clearContractor:function(){var e=this;this.isLoad=!0,this.user.contractor=void 0,this.showContractorModal=!1,this.$notify("success filled","Zarządzaj kontrahentem","Kontrahent został odpięty od użytkownika",{duration:3e3,permanent:!1}),this.isLoad=!1,this.selectedContractor=void 0,this.$nextTick((function(){e.checkIsValid()}))},showContractors:function(){this.showContractorModal=!0},hideContractorsModal:function(){this.showContractorModal=!1},saveContractor:function(e){var t=this;this.isLoad=!0,this.user.contractor=e,this.showContractorModal=!1,this.$notify("success filled","Wybrano kontrahenta","Wybrano kontrahenta ".concat(e.code,"."),{duration:3e3,permanent:!1}),this.isLoad=!1,this.selectedContractor=void 0!==this.user.contractor&&null!==this.user.contractor?"".concat(this.user.contractor.code," - ").concat(this.user.contractor.name):void 0,this.$nextTick((function(){t.checkIsValid()}))},isGranted:function(e){return!!abp.auth.hasPermission(e)},finished:function(){this.getUser(this.$route.params.userId)},hideModal:function(e){this.$refs[e].hide()},cancelUser:function(){this.$router.replace({name:"uzytkownicy"})},checkIsValid:function(){for(var e=[],t=this.$refs.formUser.elements,a=0;a<t.length;a++){var s=t[a];"INPUT"!==s.tagName&&"SELECT"!==s.tagName||s.validity.valid||e.push(s.id)}e.length>0?(this.IsNotValid=!0,this.navigationElements.forEach((function(t){var a=e.find((function(e){return e==t.id}));t.isValid=void 0===a}))):(this.IsNotValid=!1,this.navigationElements.forEach((function(e){e.isValid=!0})))},toggleAddressModal:function(e,t){0!==Object.keys(e).length?(this.addressModalTitle=t.charAt(0).toUpperCase()+t.slice(1)+" - edycja adresu dla "+e.name+" "+e.surname,this.addressModel=e,this.addressModel.type=t):(this.addressModalTitle=t.charAt(0).toUpperCase()+t.slice(1)+" - dodanie nowego adresu",this.addressModel={},this.addressModel.type=t),this.$refs.modalAddress.show()},toggleChangePasswordModel:function(e){this.passwordModalTitle=e.charAt(0).toUpperCase()+e.slice(1)+" hasła",this.passwordModalType=e,this.showChangePasswordModal=!0},hideChangePasswordModal:function(){this.showChangePasswordModal=!1},checkAllPermissions:function(e){e.permissions.filter((function(e){return"all"==e})).length>0?e.permissions=[]:(e.permissions.push("all"),this.permissionsType.forEach((function(t){0===e.permissions.filter((function(e){return e==t.id})).length&&e.permissions.push(t.id)})))},getRoleWithPermissions:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={tenantId:this.isHostTenant?this.selectedTenant.id:1},a=this,e.next=4,this.$store.dispatch("role/getAllRoleWithPermissions",t).then((function(e){a.roles=e}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),saveAddress:function(){this.$refs.formAddress.checkValidity()?void 0===this.addressModel.id?(this.addressModel.contacts=[{type:"telefon",value:this.addressModel.phone},{type:"e-mail",value:this.addressModel.email}],"added"===this.addressModel.state?(this.$notify("success filled","Zapis adresu","Adres <b>"+this.addressModel.name+" "+this.addressModel.surname+" </b> został zaktualizowany",{duration:3e3,permanent:!1}),this.$refs.modalAddress.hide()):(this.addressModel.state="added",this.user.userAddresses.push(this.addressModel),this.$notify("success filled","Zapis adresu","Adres <b>"+this.addressModel.name+" "+this.addressModel.surname+" </b> został dodany prawidłowo",{duration:3e3,permanent:!1}),this.$refs.modalAddress.hide())):(this.$notify("success filled","Zapis adresu","Adres <b>"+this.addressModel.name+" "+this.addressModel.surname+" </b> został dodany zaktualizowany",{duration:3e3,permanent:!1}),this.$refs.modalAddress.hide()):this.$notify("error filled","Błąd zapisu","Nie wszystkie wymagane pola zostały wypełnione!",{duration:3e3,permanent:!1})},saveUser:function(){this.currentNav="dane_konta";try{if(void 0===this.user.id&&!this.user.generatePassword&&this.user.password!==this.user.repeatPassword)return this.currentNav="dane_konta",void this.$notify("error filled","Błąd zapisu","Hasła nie są do siebie podobne!",{duration:3e3,permanent:!1});if(this.$refs.formUser.checkValidity()){this.isLoad=!0,this.user.role=this.userRole;var e={id:this.user.id,isActive:this.user.isActive,userName:this.user.userName,emailAddress:this.user.emailAddress,name:this.user.name,surname:this.user.surname,role:this.user.role,addresses:this.user.userAddresses,type:this.userType.id,phoneNumber:this.user.phoneNumber,displayName:this.user.displayName,emailNotification:this.user.emailNotification,smsNotification:this.user.smsNotification,qtyAvailable:this.user.qtyAvailable,nettoBrutto:this.user.nettoBrutto,payments:this.selectedPayments.map((function(e){return e.id})).join(","),deliveries:this.selectedDeliveries.map((function(e){return e.id})).join(","),tenantId:null===abp.session.tenantId?this.selectedTenant.id:1,contractorId:void 0!==this.user.contractor&&null!==this.user.contractor?this.user.contractor.id:void 0,limits:[],generatePassword:this.user.generatePassword},t=this;void 0===this.user.id?(e.password=this.user.password,this.$store.dispatch("user/createUser",e).then((function(e){t.isLoad=!1,t.$notify("success filled","Zapis użytkownika","Użytkownik ".concat(t.user.userName," został zapisany prawidłowo"),{duration:3e3,permanent:!1}),t.$router.replace({name:"uzytkownicy"})})).catch((function(e){t.isLoad=!1}))):this.$store.dispatch("user/updateUser",e).then((function(e){t.$notify("success filled","Zapis użytkownika","Użytkownik ".concat(t.user.userName," został zaktualizowany"),{duration:3e3,permanent:!1}),t.isLoad=!1,t.$router.replace({name:"uzytkownicy"})})).catch((function(e){t.isLoad=!1}))}else this.currentNav="dane_konta",this.$notify("error filled","Błąd zapisu","Nie wszystkie wymagane pola zostały wypełnione! Uzupełnij dane konta!",{duration:3e3,permanent:!1})}catch(e){this.isLoad=!1,this.$notify("error filled","Błąd zapisu","Wystąpił błąd podczas próby zapisu użytkownika.",{duration:3e3,permanent:!1})}},savePassword:function(e){if("zmiana"==this.passwordModalType){if(e.newPassword!==e.repeatPassword)return void this.$notify("error filled","Błąd zapisu","Hasła nie są do siebie podobne!",{duration:3e3,permanent:!1});this.isLoad=!0;var t={userId:this.user.id,newPassword:e.newPassword,currentPassword:e.currentPassword},a=this;this.$store.dispatch("user/changeUserPassword",t).then((function(e){a.$notify("success filled","Zmiana hasła","Hasło do konta <b>".concat(a.user.userName,"</b> zostało zmienione"),{duration:3e3,permanent:!1}),a.$router.replace({name:"uzytkownicy"}),a.isLoad=!1,a.showChangePasswordModal=!1})).catch((function(e){a.isLoad=!1}))}else{this.isLoad=!0;var s={id:this.user.id},r=this;this.$store.dispatch("user/generateUserPassword",s).then((function(e){r.$notify("success filled","Zmiana hasła","Nowe hasło do konta <b>".concat(r.user.userName,"</b> zostało wygenerowane i wysłane na adres e-mail użytkownika"),{duration:3e3,permanent:!1}),r.$router.replace({name:"uzytkownicy"}),r.isLoad=!1,r.showChangePasswordModal=!1})).catch((function(e){r.isLoad=!1}))}},resetUserPermissions:function(){this.isLoad=!0;var e={id:this.user.id},t=this;this.$store.dispatch("user/resetUserSpecificPermissions",e).then((function(e){t.$notify("success filled","Resetowanie uprawnień","Uprawnienia dla konta <b>".concat(t.user.userName,"</b> zostały zresetowane do domyślnych"),{duration:3e3,permanent:!1}),t.$router.replace({name:"uzytkownicy"}),t.isLoad=!1})).catch((function(e){t.isLoad=!1}))},getUser:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){var a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoad=!0,a={id:t,tenantId:this.user.tenantId},e.prev=2,s=this,e.next=6,this.$store.dispatch("user/getUser",a).then((function(e){if(s.user=e,s.selectedRole=e.role,null!==e.role&&void 0!==e.role){var t=s.roles.find((function(t){return t.id==e.role.id}));void 0!==t&&t.permissions.forEach((function(t){var a=e.role.permissions.find((function(e){return e.name==t.name}));t.permissionsType=void 0!==a?a.permissionsType:""}))}if(e.payments){var a=s;e.payments.split(/,/).map(Number).forEach((function(e){var t=a.payments.find((function(t){return t.id===e}));t&&a.selectedPayments.push(t)}))}if(e.deliveries){var r=s;e.deliveries.split(/,/).map(Number).forEach((function(e){var t=r.deliveries.find((function(t){return t.id===e}));t&&r.selectedDeliveries.push(t)}))}s.userType=s.userTypes.find((function(t){return t.id===e.type})),s.selectedContractor=void 0!==s.user.contractor&&null!==s.user.contractor?"".concat(s.user.contractor.code," - ").concat(s.user.contractor.name):void 0,s.isLoad=!1}));case 6:e.next=13;break;case 8:e.prev=8,e.t0=e.catch(2),this.$notify("error filled","Zarządzanie użytkownikiem","Wystąpił błąd podczas wczytywania danych użytkownika.",{duration:3e3,permanent:!1}),this.isLoad=!1,this.$router.replace({name:"uzytkownicy"});case 13:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),getEnumValues:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){var a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={type:t},s=this,e.next=4,this.$store.dispatch("dictionaries/getEnumValues",a).then((function(e){e.forEach((function(e){s.userTypes.push(e)}))}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(i.b)({selectedTenant:"role/getCookieTenant",accountType:"user/getAccountType",loggedUser:"getLoggedUser"}),{isHostTenant:function(){return null===abp.session.tenantId}}),components:{Switches:o.a,ChangePasswordModal:l,AddressModal:m,Orders:f.default,ContractorModal:y,vSelectComponent:c.a,ContractorDelivery:x.default}},_=Object(d.a)(g,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userPage"},[e.isLoad?a("div",{staticClass:"loading"}):e._e(),e._v(" "),a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("piaf-breadcrumb")],1)],1),e._v(" "),e.isHostTenant?a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-dark"},[a("div",{staticClass:"align-self-center"},[a("p",{staticClass:"mb-0"},[e._v("\n            Wybrany rodzaj: "),a("b",[e._v(e._s(void 0!==e.selectedTenant?e.selectedTenant.name:"brak"))])])])])])],1):e._e(),e._v(" "),a("b-row",{staticClass:"users-content"},[a("b-colxx",{attrs:{xxs:"12",lg:"4",xl:"3"}},[a("b-card",{staticClass:"w-100 shadow-none",attrs:{"no-body":""}},[a("div",{staticClass:"card-body p-0"},[a("b-colxx",{staticClass:"p-0 pt-1 menu-border",attrs:{xxs:"12"}},[a("b-nav",{staticClass:"w-100 navigationBox"},e._l(e.navigationElements.filter((function(t){return t.type.some((function(t){return t==e.typeNav}))&&!0===t.isGrantedPermission})),(function(t,s){return a("b-nav-item",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],key:s,class:[!t.isValid&&"invalid-item"],attrs:{active:e.currentNav===t.id,title:t.name},on:{click:function(a){e.currentNav=t.id}}},[a("span",{staticClass:"d-block d-lg-none"},[a("i",{staticClass:"fa",class:t.icon,attrs:{"aria-hidden":"true"}})]),e._v(" "),a("span",{staticClass:"d-none d-lg-block"},[a("i",{staticClass:"fa",class:t.icon,attrs:{"aria-hidden":"true"}}),e._v("\n                  "+e._s(t.name)+"\n                ")])])})),1)],1)],1)])],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",lg:"8",xl:"9"}},[a("b-form",{ref:"formUser",attrs:{id:"formUser"},on:{submit:function(t){return t.preventDefault(),e.saveUser(t)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"dane_konta"===e.currentNav,expression:"currentNav === 'dane_konta'"}]},[a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-dark pt-3"},[a("div",{staticClass:"align-self-center"},[a("h6",{staticClass:"mb-0"},[e._v("\n                    Dane konta\n                  ")])])])]),e._v(" "),a("b-colxx",{attrs:{xxs:"12"}},[a("b-row",{staticClass:"pt-3"},[a("b-colxx",{attrs:{xxs:"6"}},[a("b-form-group",{attrs:{label:"Status"}},[a("div",{staticClass:"d-flex align-items-center"},[a("switches",{staticClass:"mb-0",attrs:{theme:"custom",color:"primary-inverse"},model:{value:e.user.isActive,callback:function(t){e.$set(e.user,"isActive",t)},expression:"user.isActive"}}),e._v(" "),a("p",{staticClass:"mb-0 pl-2",staticStyle:{cursor:"pointer"}},[e.user.isActive?a("span",[e._v(e._s(e._f("l")("aktywny")))]):a("span",[e._v(e._s(e._f("l")("nieaktywny")))])])],1)])],1)],1),e._v(" "),a("b-row",[a("b-colxx",{attrs:{xxs:"12",sm:"6"}},[a("b-form-group",{attrs:{label:"Typ konta"}},[a("vSelectComponent",{attrs:{id:"dane_konta",options:e.userTypes,label:"name",placeholder:"Wybierz typ konta",requiredForm:""},model:{value:e.userType,callback:function(t){e.userType=t},expression:"userType"}})],1)],1)],1),e._v(" "),a("b-row",[a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Login"}},[a("b-form-input",{attrs:{id:"dane_konta",disabled:"edytuj"===e.typeNav,required:"",placeholder:"Login",type:"text"},model:{value:e.user.userName,callback:function(t){e.$set(e.user,"userName",t)},expression:"user.userName"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Nazwa wyświetlana"}},[a("b-form-input",{attrs:{id:"dane_konta",required:"",placeholder:"Nazwa wyświetlana",type:"text"},model:{value:e.user.displayName,callback:function(t){e.$set(e.user,"displayName",t)},expression:"user.displayName"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Imię"}},[a("b-form-input",{attrs:{id:"dane_konta",required:"",placeholder:"Imię",type:"text"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Nazwisko"}},[a("b-form-input",{attrs:{id:"dane_konta",required:"",placeholder:"Nazwisko",type:"text"},model:{value:e.user.surname,callback:function(t){e.$set(e.user,"surname",t)},expression:"user.surname"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Adres e-mail"}},[a("b-form-input",{attrs:{id:"dane_konta",disabled:"edytuj"===e.typeNav,required:"",placeholder:"E-mail",type:"email"},model:{value:e.user.emailAddress,callback:function(t){e.$set(e.user,"emailAddress",t)},expression:"user.emailAddress"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Telefon"}},[a("b-form-input",{attrs:{id:"dane_konta",placeholder:"Telefon",type:"text"},model:{value:e.user.phoneNumber,callback:function(t){e.$set(e.user,"phoneNumber",t)},expression:"user.phoneNumber"}})],1)],1),e._v(" "),void 0===e.user.id?[a("b-colxx",{attrs:{xxs:"12"}},[a("b-form-group",{attrs:{label:"Generuj hasło automatycznie podczas zapisu"}},[a("div",{staticClass:"d-flex align-items-center"},[a("switches",{staticClass:"mb-0",attrs:{theme:"custom",color:"primary-inverse"},model:{value:e.user.generatePassword,callback:function(t){e.$set(e.user,"generatePassword",t)},expression:"user.generatePassword"}}),e._v(" "),a("p",{staticClass:"mb-0 pl-2",staticStyle:{cursor:"pointer"}},[e.user.generatePassword?a("span",[e._v("tak")]):a("span",[e._v("nie")])])],1)])],1),e._v(" "),e.user.generatePassword?e._e():a("b-colxx",{attrs:{xxs:"6"}},[a("b-form-group",{attrs:{label:"Hasło"}},[a("b-form-input",{attrs:{id:"dane_konta",required:"",placeholder:"Hasło",type:"password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1)],1),e._v(" "),e.user.generatePassword?e._e():a("b-colxx",{attrs:{xxs:"6"}},[a("b-form-group",{attrs:{label:"Powtórz hasło"}},[a("b-form-input",{attrs:{id:"dane_konta",required:"",placeholder:"Powtórz hasło",type:"password"},model:{value:e.user.repeatPassword,callback:function(t){e.$set(e.user,"repeatPassword",t)},expression:"user.repeatPassword"}})],1)],1)]:e._e(),e._v(" "),void 0!==e.user.id?[a("b-colxx",{staticClass:"pb-3",attrs:{xxs:"12"}},[a("b-button",{staticClass:"squared",attrs:{variant:"outline-primary"},on:{click:function(t){return t.preventDefault(),e.toggleChangePasswordModel("zmiana")}}},[e._v("\n                      Zmień hasło\n                    ")]),e._v(" "),a("span",{staticClass:"px-3"},[e._v(" lub ")]),e._v(" "),a("b-button",{attrs:{variant:"outline-primary"},on:{click:function(t){return t.preventDefault(),e.toggleChangePasswordModel("reset")}}},[e._v("\n                      Zresetuj hasło\n                    ")])],1)]:e._e(),e._v(" "),void 0!==e.userType&&null!==e.userType&&2===e.userType.id?a("b-colxx",{attrs:{xxs:"12"}},[a("b-form-group",{attrs:{label:"Kontrahent"}},[a("b-input-group",[void 0!==e.userType&&null!==e.userType&&2===e.userType.id?a("b-form-input",{attrs:{id:"dane_konta",name:"contractor",required:"",placeholder:"Wybierz kontrahenta...",type:"text"},on:{keydown:e.contractorValidate},model:{value:e.selectedContractor,callback:function(t){e.selectedContractor=t},expression:"selectedContractor"}}):e._e(),e._v(" "),a("b-input-group-append",[a("b-button",{attrs:{variant:"outline-primary",disabled:void 0===e.user.contractor},on:{click:function(t){return t.preventDefault(),e.clearContractor(t)}}},[a("i",{staticClass:"fas fa-times"})]),e._v(" "),a("b-button",{attrs:{variant:"primary"},on:{click:function(t){return t.preventDefault(),e.showContractors(t)}}},[a("i",{staticClass:"fas fa-search"})])],1)],1)],1)],1):e._e()],2)],1)],1),e._v(" "),a("b-row",[a("b-colxx",{staticClass:"border-top border-dark py-2 d-flex justify-content-end",attrs:{xxs:"12"}},[a("b-button",{staticClass:"squared",attrs:{type:"button",variant:"outline-primary mr-2"},on:{click:function(t){return t.preventDefault(),e.cancelUser()}}},[e._v("\n                Anuluj\n              ")]),e._v(" "),a("b-button",{staticClass:"squared",attrs:{type:"submit",variant:"primary",form:"formUser",disabled:e.IsNotValid}},[e._v("\n                Zapisz\n              ")])],1)],1)],1),e._v(" "),e.navigationElements.find((function(e){return"rola"===e.id})).isGrantedPermission?a("div",{directives:[{name:"show",rawName:"v-show",value:"rola"===e.currentNav,expression:"currentNav === 'rola'"}]},[a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-dark pt-3"},[a("div",{staticClass:"align-self-center"},[a("h6",{staticClass:"mb-0"},[e._v("\n                    "+e._s(e._f("l")("Rola oraz uprawnienia użytkownika"))+"\n                  ")])])])])],1),e._v(" "),a("b-row",[a("b-colxx",{staticClass:"pt-3",attrs:{xs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-primary"},[a("div",{staticClass:"align-self-center"},[a("h6",{staticClass:"mb-0"},[e._v("\n                    "+e._s(e._f("l")("Rola użytkownika"))+"\n                  ")])])])]),e._v(" "),a("b-colxx",{staticClass:"pt-3",attrs:{xxs:"12"}},[a("vSelectComponent",{attrs:{id:"rola",options:e.roles,label:"displayName",placeholder:"Wybierz rolę",requiredForm:"",disabled:!1===e.isHostTenant&&void 0!==e.user&&"admin"===e.user.name&&"edytuj"===e.typeNav||!0===e.isGranted("Pages.RoleManagement.Read")&&!1===e.isGranted("Pages.RoleManagement.Update")},model:{value:e.selectedRole,callback:function(t){e.selectedRole=t},expression:"selectedRole"}})],1)],1),e._v(" "),a("b-row",[a("b-colxx",{staticClass:"pt-3",attrs:{xs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-primary"},[a("div",{staticClass:"align-self-center"},[a("h6",{staticClass:"mb-0"},[e._v("\n                    "+e._s(e._f("l")("Uprawnienia użytkownika dla wybranej roli"))+" "+e._s(void 0!==e.userRole?"- "+e.userRole.displayName:"")+"\n                  ")])])])])],1),e._v(" "),void 0!==e.userRole?a("div",[a("b-row",{staticClass:"pt-3"},[a("b-colxx",{attrs:{xxs:"12"}},[a("table",{staticClass:"table b-table table-striped table-bordered border responsive"},[a("thead",{staticClass:"bg-primary"},[a("tr",[a("th",[e._v(e._s(e._f("l")("Uprawnienia")))]),e._v(" "),e._l(e.permissionsType,(function(t,s){return a("th",{key:s},[e._v("\n                        "+e._s(t.name)+"\n                      ")])}))],2)]),e._v(" "),a("tbody",e._l(e.userRole.permissions.filter((function(e){return"configurable"==e.type})),(function(t,s){return a("tr",{key:s},[a("td",[e._v(e._s(t.name))]),e._v(" "),e._l(e.permissionsType,(function(s,r){return a("td",{key:r,attrs:{align:"center"}},[a("b-form-checkbox-group",{model:{value:t.permissionsType,callback:function(a){e.$set(t,"permissionsType",a)},expression:"item.permissionsType"}},[a("b-form-checkbox",{staticClass:"m-0",attrs:{value:s.id,disabled:!1===e.isHostTenant&&void 0!==e.user&&"admin"===e.user.name&&"edytuj"===e.typeNav||!0===e.isGranted("Pages.RoleManagement.Read")&&!1===e.isGranted("Pages.RoleManagement.Update")}})],1)],1)}))],2)})),0),e._v(" "),a("thead",{staticClass:"bg-primary"},[a("tr",[a("th",[e._v("Uprawnienia")]),e._v(" "),a("th",{attrs:{colspan:"4"}},[e._v("\n                        View\n                      ")])])]),e._v(" "),a("tbody",e._l(e.userRole.permissions.filter((function(e){return"simple"==e.type})),(function(t,s){return a("tr",{key:s},[a("td",[e._v(e._s(t.name))]),e._v(" "),a("td",{attrs:{align:"center",colspan:"4"}},[a("b-form-checkbox-group",{model:{value:t.permissionsType,callback:function(a){e.$set(t,"permissionsType",a)},expression:"item.permissionsType"}},[a("b-form-checkbox",{staticClass:"m-0",attrs:{value:"view",disabled:!1===e.isHostTenant&&void 0!==e.user&&"admin"===e.user.name&&"edytuj"===e.typeNav||!0===e.isGranted("Pages.RoleManagement.Read")&&!1===e.isGranted("Pages.RoleManagement.Update")}})],1)],1)])})),0)])]),e._v(" "),void 0!==e.user.role&&null!==e.user.role&&e.userRole.id===e.user.role.id?a("b-colxx",{attrs:{xxs:"12"}},[a("span",[e._v("Każda rola posiada domyślnie zdefiniowane uprawnienia. Uprawnienia można nadać indywidualnie dla każdego z użytkowników.")]),e._v(" "),a("b-button",{staticClass:"squared",attrs:{disabled:!1===e.isHostTenant&&void 0!==e.user&&"admin"===e.user.name&&"edytuj"===e.typeNav,type:"button",variant:"outline-primary"},on:{click:function(t){return t.preventDefault(),e.resetUserPermissions(t)}}},[e._v("\n                  "+e._s(e._f("l")("Resetuj uprawnienia do domyślnej konfiguracji"))+"\n                ")])],1):e._e()],1)],1):a("b-row",[a("b-colxx",{attrs:{xs:"12"}},[a("b-card",{staticClass:"my-2 d-flex flex-row",attrs:{"no-body":""}},[a("div",{staticClass:"d-flex flex-grow-1 min-width-zero"},[a("div",{staticClass:"card-body"},[e._v("\n                    "+e._s(e._f("l")("Brak uprawnień dla wybranej roli"))+"\n                  ")])])])],1)],1),e._v(" "),a("b-row",[a("b-colxx",{staticClass:"border-top border-dark py-2 d-flex justify-content-end",attrs:{xxs:"12"}},[a("b-button",{staticClass:"squared",attrs:{type:"button",variant:"outline-primary mr-2"},on:{click:function(t){return t.preventDefault(),e.cancelUser()}}},[e._v("\n                "+e._s(e._f("l")("Anuluj"))+"\n              ")]),e._v(" "),a("b-button",{staticClass:"squared",attrs:{type:"submit",variant:"primary",form:"formUser",disabled:e.IsNotValid}},[e._v("\n                "+e._s(e._f("l")("Zapisz"))+"\n              ")])],1)],1)],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"adresy_dostaw"===e.currentNav,expression:"currentNav === 'adresy_dostaw'"}]},[a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-dark pt-3"},[a("div",{staticClass:"align-self-center"},[a("h6",{staticClass:"mb-0"},[e._v("\n                    "+e._s(e._f("l")("Książka adresowa"))+"\n                  ")])])])])],1),e._v(" "),a("b-row",{staticClass:"pt-2"},[a("AddressModal",{attrs:{data:e.user.userAddresses,type:1,userId:e.user.id,countries:e.countries,titleHeader:e._f("l")("Dane do dostawy"),titleCreate:e._f("l")("Dodaj nowy adres dostawy")},on:{finished:e.finished}}),e._v(" "),a("AddressModal",{attrs:{data:e.user.userAddresses,type:2,userId:e.user.id,countries:e.countries,titleHeader:e._f("l")("Dane do faktury"),titleCreate:e._f("l")("Dodaj nowy adres faktury")},on:{finished:e.finished}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"ustawienia"===e.currentNav,expression:"currentNav === 'ustawienia'"}]},[a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-dark pt-3"},[a("div",{staticClass:"align-self-center"},[a("h6",{staticClass:"mb-0"},[e._v("\n                    "+e._s(e._f("l")("Ustawienia"))+"\n                  ")])])])])],1),e._v(" "),a("b-row",{staticClass:"py-2"},[a("b-colxx",{staticClass:"py-2",attrs:{xxs:"6"}},[a("div",{staticClass:"d-flex align-items-center"},[a("switches",{staticClass:"mb-0",attrs:{theme:"custom",color:"primary-inverse"},model:{value:e.user.emailNotification,callback:function(t){e.$set(e.user,"emailNotification",t)},expression:"user.emailNotification"}}),e._v(" "),a("p",{staticClass:"mb-0 pl-2",staticStyle:{cursor:"pointer"}},[a("span",[e._v(e._s(e._f("l")("Powiadomienia e-mail")))])])],1)]),e._v(" "),a("b-colxx",{staticClass:"py-2",attrs:{xxs:"6"}},[a("div",{staticClass:"d-flex align-items-center"},[a("switches",{staticClass:"mb-0",attrs:{theme:"custom",color:"primary-inverse"},model:{value:e.user.smsNotification,callback:function(t){e.$set(e.user,"smsNotification",t)},expression:"user.smsNotification"}}),e._v(" "),a("p",{staticClass:"mb-0 pl-2",staticStyle:{cursor:"pointer"}},[a("span",[e._v("Powiadomienia SMS")])])],1)]),e._v(" "),a("b-colxx",{staticClass:"py-2",attrs:{xxs:"6"}},[a("div",{staticClass:"d-flex align-items-center"},[a("switches",{staticClass:"mb-0",attrs:{theme:"custom",color:"primary-inverse"},model:{value:e.user.qtyAvailable,callback:function(t){e.$set(e.user,"qtyAvailable",t)},expression:"user.qtyAvailable"}}),e._v(" "),a("p",{staticClass:"mb-0 pl-2",staticStyle:{cursor:"pointer"}},[a("span",[e._v(e._s(e._f("l")("widoczność dostępnych stanów magazynowych")))])])],1)]),e._v(" "),a("b-colxx",{staticClass:"py-2",attrs:{xxs:"6"}},[a("div",{staticClass:"d-flex align-items-center"},[a("switches",{staticClass:"mb-0",attrs:{theme:"custom",color:"primary-inverse"},model:{value:e.user.nettoBrutto,callback:function(t){e.$set(e.user,"nettoBrutto",t)},expression:"user.nettoBrutto"}}),e._v(" "),a("p",{staticClass:"mb-0 pl-2",staticStyle:{cursor:"pointer"}},[!0===e.user.nettoBrutto?a("span",[e._v(e._s(e._f("l")("licz od brutto")))]):a("span",[e._v(e._s(e._f("l")("licz od netto")))])])],1)]),e._v(" "),a("b-colxx",{staticClass:"py-2",attrs:{xxs:"6"}},[a("b-form-group",{attrs:{label:"Wybierz płatności"}},[a("vSelectComponent",{attrs:{id:"ustawienia",options:e.payments,label:e._f("l")("name"),placeholder:"Wybierz płatności",requiredForm:"",multiple:""},model:{value:e.selectedPayments,callback:function(t){e.selectedPayments=t},expression:"selectedPayments"}}),e._v(" "),a("small",[e._v(e._s(e._f("l")("Pole obowiązkowe")))])],1)],1),e._v(" "),a("b-colxx",{staticClass:"py-2",attrs:{xxs:"6"}},[a("b-form-group",{attrs:{label:e._f("l")("Wybierz metody dostawy")}},[a("vSelectComponent",{attrs:{id:"ustawienia",options:e.deliveries,label:"name",placeholder:e._f("l")("Wybierz metody dostawy"),requiredForm:"",multiple:""},model:{value:e.selectedDeliveries,callback:function(t){e.selectedDeliveries=t},expression:"selectedDeliveries"}}),e._v(" "),a("small",[e._v(e._s(e._f("l")("Pole obowiązkowe")))])],1)],1)],1),e._v(" "),a("b-row",[a("b-colxx",{staticClass:"border-top border-dark py-2 d-flex justify-content-end",attrs:{xxs:"12"}},[a("b-button",{staticClass:"squared",attrs:{type:"button",variant:"outline-primary mr-2"},on:{click:function(t){return t.preventDefault(),e.cancelUser()}}},[e._v("\n                "+e._s(e._f("l")("Anuluj"))+"\n              ")]),e._v(" "),a("b-button",{staticClass:"squared",attrs:{type:"submit",variant:"primary",form:"formUser",disabled:e.IsNotValid}},[e._v("\n                "+e._s(e._f("l")("Zapisz"))+"\n              ")])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"zamowienia"===e.currentNav,expression:"currentNav === 'zamowienia'"}]},[a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-dark pt-3"},[a("div",{staticClass:"align-self-center"},[a("h6",{staticClass:"mb-0"},[e._v("\n                    "+e._s(e._f("l")("Zamówienia użytkownika"))+"\n                  ")])])])])],1),e._v(" "),void 0!==e.user.id&&"zamowienia"===e.currentNav?a("Orders",{attrs:{hiding:!0,userId:e.$route.params.userId,tenantId:null!==e.selectedTenant?e.selectedTenant.id:1}}):a("b-row",[a("b-colxx",{attrs:{xs:"12"}},[a("b-card",{staticClass:"my-2 d-flex flex-row",attrs:{"no-body":""}},[a("div",{staticClass:"d-flex flex-grow-1 min-width-zero"},[a("div",{staticClass:"card-body"},[e._v("\n                    "+e._s(e._f("l")("Brak zamówień"))+"\n                  ")])])])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"dokumenty"===e.currentNav,expression:"currentNav === 'dokumenty'"}]},[a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-dark pt-3"},[a("div",{staticClass:"align-self-center"},[a("h6",{staticClass:"mb-0"},[e._v("\n                    "+e._s(e._f("l")("Dokumenty sprzedażowe użytkownika"))+"\n                  ")])])])])],1),e._v(" "),a("b-row",[a("b-colxx",{attrs:{xs:"12"}},[a("b-card",{staticClass:"my-2 d-flex flex-row",attrs:{"no-body":""}},[a("div",{staticClass:"d-flex flex-grow-1 min-width-zero"},[a("div",{staticClass:"card-body"},[e._v("\n                    "+e._s(e._f("l")("Brak dokumentów sprzedażowych"))+"\n                  ")])])])],1)],1)],1)])],1)],1),e._v(" "),a("ChangePasswordModal",{attrs:{data:e.modalChangePasswordData,passwordModalType:e.passwordModalType,passwordModalTitle:e.passwordModalTitle,iscurrentPassword:!1,display:e.showChangePasswordModal},on:{saveChanges:e.savePassword,changeDisplayModal:e.hideChangePasswordModal}}),e._v(" "),e.showContractorModal?a("ContractorModal",{attrs:{display:e.showContractorModal},on:{changeLoader:e.changeLoader,changeDisplayModal:e.hideContractorsModal,saveChanges:e.saveContractor}}):e._e()],1)}),[],!1,null,null,null);t.default=_.exports},d54f:function(e,t,a){"use strict";a.r(t);var s=(a("96cf"),a("3b8d")),r=a("fa26"),o={props:["currentUser","type","selectedAddress"],data:function(){return{isLoaded:!1,addresses:[],countries:[],showModal:!1,modalObject:{},modalDeleteObject:void 0,userId:void 0,tenantId:void 0,selectedAddressId:void 0}},created:function(){var e=Object(s.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCountries();case 2:return this.userId=this.currentUser.id,this.tenantId=this.currentUser.tenantId,e.next=6,this.getContractorRecipients();case 6:"shoppingCart"===this.type&&(this.selectedAddressId=this.selectedAddress),this.$nextTick((function(){t.isLoaded=!0}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),methods:{getCountries:function(){var e=Object(s.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.$store.dispatch("country/getCountries").then((function(e){t.countries=e}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getContractorRecipients:function(){var e=Object(s.a)(regeneratorRuntime.mark((function e(){var t,a,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoaded=!1,t={userId:this.userId,tenantId:this.tenantId},a=this,e.next=5,this.$store.dispatch("profile/getContractorRecipients",t).then((function(e){a.addresses=e,"shoppingCart"===a.type&&1===s.addresses.length&&(a.selectedAddressId=s.addresses[0].id,a.$emit("changeSelectedAddress",s.addresses[0],"dostawa")),a.isLoaded=!0})).catch((function(e){a.isLoaded=!1}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),changeLoader:function(e){this.$emit("changeLoader",e)},deleteClick:function(e){this.modalDeleteObject=e,this.$refs.modalDelete.show()},confirmDelete:function(){this.changeLoader(!0);var e=this;this.$store.dispatch("profile/deleteRecipientAddress",this.modalDeleteObject).then((function(t){e.$notify("success filled","Zapis adresu dostawy","Adres dostawy został oznaczony jako nieaktywny"),e.$emit("reload"),e.$refs.modalDelete.hide(),e.modalDeleteObject={},e.getContractorRecipients(),e.changeLoader(!1)}))},addClick:function(){this.showModal=!0,this.modalObject={}},editClick:function(e){this.showModal=!0,this.modalObject=e},saveDelivery:function(e){this.changeLoader(!0);var t=this;void 0===e.id?(e.userId=this.userId,e.tenantId=this.tenantId,this.$store.dispatch("profile/createRecipientAddress",e).then((function(e){t.$notify("success filled","Zapis adresu dostawy","Adres dostawy został dodany prawidłowo"),t.$emit("reload"),t.showModal=!1,t.modalData={},t.getContractorRecipients(),t.changeLoader(!1)})).catch((function(e){t.changeLoader(!1)}))):this.$store.dispatch("profile/updateRecipientAddress",e).then((function(e){t.$notify("success filled","Zapis adresu dostawy","Adres dostawy został zapisany prawidłowo"),t.$emit("reload"),t.showModal=!1,t.modalData={},t.getContractorRecipients(),t.changeLoader(!1)})).catch((function(e){t.changeLoader(!1)}))},selectAddress:function(e){this.type&&"shoppingCart"===this.type&&(this.selectedAddressId=e.id,this.$emit("changeSelectedAddress",e,"dostawa"),this.$notify("success filled","Dane do dostawy zostały zmienione","Dane do dostawy zostały zmieniony na <b>".concat(e.companyName,"</b>, adres: ").concat(e.address),{duration:3e3,permanent:!1}))}},components:{DeliveryModal:r.a}},i=a("2877"),n=Object(i.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",[a("b-colxx",{staticClass:"text-primary",attrs:{xxs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-primary"},["shoppingCart"===e.type?a("div",{staticClass:"d-flex align-self-center border-primary"},[a("div",{staticClass:"icon"},[a("i",{staticClass:"fas fa-cart-arrow-down fa-2x mr-2"})]),e._v(" "),a("div",{staticClass:"align-self-center"},[a("h3",{staticClass:"mb-0"},[e._v("Wybierz adres dostawy")])])]):a("div",{staticClass:"align-self-center border-primary"},[a("h4",{staticClass:"mb-0"},[e._v("Adresy dostaw")])]),e._v(" "),a("div",{staticClass:"align-self-center ml-auto text-primary"},[a("p",{staticClass:"mb-0",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.addClick()}}},[a("i",{staticClass:"fas fa-plus"}),e._v(" dodaj nowy adres dostawy")])])])]),e._v(" "),e.isLoaded?a("b-colxx",{attrs:{xxs:"12"}},[e.addresses.length>0?a("b-row",e._l(e.addresses,(function(t,s){return a("b-colxx",{key:s,attrs:{xxs:"12",md:"6"}},[a("b-card",{staticClass:"my-2 address-card",class:{active:t.id===e.selectedAddressId!=""},attrs:{"no-body":""}},[a("b-card-body",{staticClass:"px-2 py-3 address-card-body",on:{click:function(a){return e.selectAddress(t)}}},[t.id===e.selectedAddressId?a("div",{staticClass:"selected-address"},[a("i",{staticClass:"fas fa-check fa-2x text-primary"})]):e._e(),e._v(" "),a("h5",{staticClass:"title text-primary"},[e._v(e._s(t.companyName||t.name+" "+t.surname))]),e._v(" "),a("ul",{staticClass:"fa-ul ml-3 mb-0"},[a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),e._v(" "),Object.keys(t.city).length>0?a("span",[e._v(e._s(t.city)+",")]):e._e(),e._v(" "+e._s(t.address)+"\n                                ")]),e._v(" "),a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),e._v("\n                                    "+e._s(t.postalCode)+" "+e._s(t.postal)+"\n                                ")]),e._v(" "),t.nip?a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),e._v("\n                                    NIP: "+e._s(t.countryIso)+" "+e._s(t.nip)+"\n                                ")]):e._e()])]),e._v(" "),a("b-card-footer",{staticClass:"p-1 bg-white"},[a("div",{staticClass:"float-right"},[a("b-button",{attrs:{variant:"outline-primary",size:"sm",type:"button"},on:{click:function(a){return e.deleteClick(t)}}},[e._v("usuń")]),e._v(" "),null!==e.userId&&void 0!==e.userId?a("b-button",{attrs:{variant:"outline-primary",size:"sm",type:"button"},on:{click:function(a){return e.editClick(t)}}},[e._v("edytuj")]):e._e()],1)])],1)],1)})),1):a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("b-card",{staticClass:"my-2 d-flex flex-row",attrs:{"no-body":""}},[a("div",{staticClass:"d-flex flex-grow-1 min-width-zero"},[a("div",{staticClass:"card-body"},[e._v("\n                                "+e._s(e._f("l")("Brak dostępnych adresów"))+"\n                            ")])])])],1)],1)],1):a("b-colxx",{attrs:{xxs:"12"}},[a("b-card",{staticStyle:{"min-height":"220px"},attrs:{"no-body":""}},[a("div",{staticClass:"card-body d-flex align-items-center justify-content-center p-3"},[a("div",{staticClass:"loading-div",staticStyle:{width:"40px",height:"40px"}})])])],1)],1),e._v(" "),a("b-modal",{ref:"modalDelete",attrs:{id:"modalDelete",size:"md",title:"Zarządzanie adresem",centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""}},[a("b-form",{ref:"formDelete",attrs:{id:"formDelete"},on:{submit:function(t){return t.preventDefault(),e.confirmDelete(t)}}},[a("b-row",[a("b-colxx",{attrs:{xs:"12"}},[a("h6",[e._v("Czy chcesz usunąć adres?")])])],1)],1),e._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{staticClass:"col-2",attrs:{type:"button",variant:"outline-primary"},on:{click:function(t){return e.$refs.modalDelete.hide()}}},[e._v("Nie")]),e._v(" "),a("b-button",{staticClass:"col-2",attrs:{type:"submit",variant:"primary",form:"formDelete"}},[e._v("Tak")])],1)],2),e._v(" "),e.showModal?a("DeliveryModal",{attrs:{display:e.showModal,data:e.modalObject,countries:e.countries,type:e.currentUser.type},on:{changeDisplayModal:function(t){e.showModal=!1},changeLoader:e.changeLoader,saveChanges:e.saveDelivery}}):e._e()],1)}),[],!1,null,null,null);t.default=n.exports},fa24:function(e,t,a){},fa26:function(e,t,a){"use strict";var s={props:["data","display","countries","type"],methods:{saveDelivery:function(){this.$emit("saveChanges",this.data)}},computed:{activeModal:{get:function(){return this.display},set:function(e){this.$emit("changeDisplayModal",e)}}},components:{vSelectComponent:(a("7f7f"),a("7514"),a("4df8")).a},mounted:function(){var e=this;if(this.data.country){var t=this.countries.find((function(t){return t.name===e.data.country}));this.data.country=t}}},r=a("2877"),o=Object(r.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-modal",{ref:"modalDelivery",attrs:{id:"modalDelivery",size:"lg",title:"Zarządzaj adresem dostawy",centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""},model:{value:e.activeModal,callback:function(t){e.activeModal=t},expression:"activeModal"}},[a("b-form",{ref:"formDelivery",attrs:{id:"formDelivery"},on:{submit:function(t){return t.preventDefault(),e.saveDelivery(t)}}},[a("b-row",[1===e.type?a("b-colxx",{attrs:{xxs:"12"}},[a("b-form-group",{attrs:{label:"Imie"}},[a("b-form-input",{attrs:{maxlength:49,placeholder:"Imie",type:"text",required:""},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}})],1)],1):e._e(),e._v(" "),1===e.type?a("b-colxx",{attrs:{xxs:"12"}},[a("b-form-group",{attrs:{label:"Nazwisko"}},[a("b-form-input",{attrs:{maxlength:49,placeholder:"Nazwisko",type:"text",required:""},model:{value:e.data.surname,callback:function(t){e.$set(e.data,"surname",t)},expression:"data.surname"}})],1)],1):a("b-colxx",{attrs:{xxs:"12"}},[a("b-form-group",{attrs:{label:"Nazwa firmy"}},[a("b-form-input",{attrs:{maxlength:49,placeholder:"Nazwa firmy",type:"text",required:""},model:{value:e.data.companyName,callback:function(t){e.$set(e.data,"companyName",t)},expression:"data.companyName"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12"}},[a("b-form-group",{attrs:{label:"Kraj"}},[a("vSelectComponent",{attrs:{requiredForm:"",options:e.countries,label:"name",placeholder:"Wybierz kraj"},model:{value:e.data.country,callback:function(t){e.$set(e.data,"country",t)},expression:"data.country"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"4"}},[a("b-form-group",{attrs:{label:"Kod pocztowy"}},[a("b-form-input",{attrs:{id:"kod_pocztowy",required:"",placeholder:"Kod pocztowy",type:"text"},model:{value:e.data.postalCode,callback:function(t){e.$set(e.data,"postalCode",t)},expression:"data.postalCode"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"8"}},[a("b-form-group",{attrs:{label:"Miejscowość"}},[a("b-form-input",{attrs:{required:"",placeholder:"Miasto",type:"text"},model:{value:e.data.city,callback:function(t){e.$set(e.data,"city",t)},expression:"data.city"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6",lg:"12",xl:"6"}},[a("b-form-group",{attrs:{label:"Ulica"}},[a("b-form-input",{attrs:{placeholder:"Ulica",type:"text"},model:{value:e.data.street,callback:function(t){e.$set(e.data,"street",t)},expression:"data.street"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"3",lg:"6",xl:"3"}},[a("b-form-group",{attrs:{label:"Nr budynku"}},[a("b-form-input",{attrs:{required:"",placeholder:"Nr budynku",type:"text"},model:{value:e.data.houseNumber,callback:function(t){e.$set(e.data,"houseNumber",t)},expression:"data.houseNumber"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"3",lg:"6",xl:"3"}},[a("b-form-group",{attrs:{label:"Nr lokalu"}},[a("b-form-input",{attrs:{placeholder:"Nr lokalu",type:"text"},model:{value:e.data.apartmentNumber,callback:function(t){e.$set(e.data,"apartmentNumber",t)},expression:"data.apartmentNumber"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Email"}},[a("b-form-input",{attrs:{required:"",placeholder:"Email",type:"email"},model:{value:e.data.email,callback:function(t){e.$set(e.data,"email",t)},expression:"data.email"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Telefon"}},[a("b-form-input",{attrs:{required:"",placeholder:"Telefon",type:"text"},model:{value:e.data.phone,callback:function(t){e.$set(e.data,"phone",t)},expression:"data.phone"}})],1)],1)],1)],1),e._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{staticClass:"squared",attrs:{type:"button",variant:"outline-primary"},on:{click:function(t){return e.$emit("changeDisplayModal",!1)}}},[e._v("Anuluj")]),e._v(" "),a("b-button",{staticClass:"squared",attrs:{type:"submit",variant:"primary",form:"formDelivery"}},[e._v("Zapisz")])],1)],2)],1)}),[],!1,null,null,null);t.a=o.exports}}]);