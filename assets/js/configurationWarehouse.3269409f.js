(window.webpackJsonp=window.webpackJsonp||[]).push([["configurationWarehouse"],{"5d4a":function(e,t,a){"use strict";var o=a("03cb"),n=a("8a64"),r=a("061a"),s=a("7585");a("3626"),t.locale=o.locale.bind(o),t.loadMessages=n.load.bind(n),t.formatMessage=n.format.bind(n),t.formatNumber=r.format.bind(r),t.parseNumber=r.parse.bind(r),t.formatDate=s.format.bind(s),t.parseDate=s.parse.bind(s),t.message=n,t.number=r,t.date=s,t.disableIntl=function(){"intl"===r.engine()&&r.resetInjection(),"intl"===s.engine()&&s.resetInjection()}},6191:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("2b0e"),n=o.default||o,r=a("5cf5"),s=a("d710"),i=n.extend({extends:s.DxComponent,props:{accessKey:String,activeStateEnabled:Boolean,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,icon:String,onClick:Function,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,stylingMode:String,tabIndex:Number,template:{},text:String,type:String,useSubmitBehavior:Boolean,validationGroup:String,visible:Boolean,width:[Function,Number,String]},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=r.default}});t.DxButton=i,t.default=i},f393:function(e,t,a){"use strict";a.r(t);var o=(a("96cf"),a("3b8d")),n=(a("7f7f"),a("d30a")),r=a("6191"),s=a.n(r),i=(a("5d4a"),a("2f62"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isLoad?a("div",{staticClass:"loading"}):e._e(),e._v(" "),a("b-modal",{ref:"modalWarehouse",attrs:{id:"modalWarehouse",size:"lg",title:"Zarządzaj magazynem",centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""},model:{value:e.activeModal,callback:function(t){e.activeModal=t},expression:"activeModal"}},[a("b-form",{ref:"formWarehouse",attrs:{id:"formWarehouse"},on:{submit:function(t){return t.preventDefault(),e.saveWarehouse(t)}}},[a("b-row",[a("b-colxx",{attrs:{xxs:"6"}},[a("b-form-group",{attrs:{label:"Magazyn z systemu ERP:"}},[a("vSelectComponent",{attrs:{options:e.erpWarehouses,label:"name",placeholder:"Wybierz magazyn",requiredForm:""},model:{value:e.selectedWarehouse,callback:function(t){e.selectedWarehouse=t},expression:"selectedWarehouse"}})],1)],1)],1),e._v(" "),a("b-row",[a("b-colxx",{attrs:{xxs:"6"}},[a("b-form-group",{attrs:{label:"Symbol"}},[a("b-form-input",{attrs:{disabled:"",placeholder:"Symbol",type:"text"},model:{value:e.warehouse.symbol,callback:function(t){e.$set(e.warehouse,"symbol",t)},expression:"warehouse.symbol"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"6"}},[a("b-form-group",{attrs:{label:"Nazwa"}},[a("b-form-input",{attrs:{disabled:"",placeholder:"Nazwa",type:"text"},model:{value:e.warehouse.name,callback:function(t){e.$set(e.warehouse,"name",t)},expression:"warehouse.name"}})],1)],1)],1)],1),e._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{staticClass:"squared",attrs:{type:"button",variant:"outline-primary"},on:{click:function(t){e.activeModal=!1}}},[e._v("Anuluj")]),e._v(" "),a("b-button",{staticClass:"squared",attrs:{type:"submit",variant:"primary",form:"formWarehouse"}},[e._v("Zapisz")])],1)],2)],1)}),l=(a("7514"),a("4df8")),c={props:["display","data"],data:function(){return{isLoad:!1,erpWarehouses:[],warehouse:{},selectedWarehouse:void 0}},methods:{getErpWarehoues:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$emit("changeLoader",!0),t=this,e.next=4,this.$store.dispatch("product/getErpWarehouses").then((function(e){t.erpWarehouses=e,t.$emit("changeLoader",!1)})).catch((function(e){t.$emit("changeLoader",!1),t.activeModal=!1}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),saveWarehouse:function(){this.$emit("changeLoader",!0);var e={erpId:this.warehouse.id,code:this.warehouse.symbol,name:this.warehouse.name},t=this;this.$store.dispatch("product/createWarehouse",e).then((function(a){t.$notify("success filled","Zarządzanie magazynami","Magazyn ".concat(e.name," został dodany do listy"),{duration:3e3,permanent:!1}),t.activeModal=!1,t.$emit("changeLoader",!1)})).catch((function(e){t.$emit("changeLoader",!1)}))}},mounted:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getErpWarehoues();case 2:void 0!==this.data.erpId&&(this.selectedWarehouse=this.erpWarehouses.find((function(e){return e.id===t.data.erpId})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),computed:{activeModal:{get:function(){return this.display},set:function(e){this.$emit("changeDisplayModal",e)}}},watch:{selectedWarehouse:function(e){this.warehouse=e}},components:{vSelectComponent:l.a}},u=a("2877"),d=Object(u.a)(c,i,[],!1,null,null,null).exports,h={data:function(){return{isLoad:!1,showModal:!1,modalData:{},editButtons:[{hint:this.L("Usuń"),icon:"trash",onClick:this.deleteClick}],deleteObject:{},warehouses:[],totalCount:0,pageSize:10,pageSizes:[5,10,20]}},methods:{changeLoader:function(e){this.isLoad=e},createClick:function(e){this.showModal=!0,this.modalData={}},deleteClick:function(e){this.deleteObject=e.row.data,this.$refs.modalDelete.show()},confirmDelete:function(){var e=this;this.isLoad=!0;var t=this;this.$store.dispatch("product/deleteWarehouse",this.deleteObject).then((function(a){t.$notify("success filled","Zarządzanie magazynami","Magazyn ".concat(e.deleteObject.name," został usunięty do listy"),{duration:3e3,permanent:!1}),t.$refs.modalDelete.hide(),t.getAllWarehoues(),t.isLoad=!1})).catch((function(e){t.isLoad=!1}))},onToolbarPreparing:function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"add",hint:this.L("Dodaj"),onClick:this.createClick}})},getAllWarehoues:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoad=!0,t=this,e.next=4,this.$store.dispatch("product/getWarehouses").then((function(e){t.warehouses=e,t.isLoad=!1})).catch((function(e){t.isLoad=!1}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),hideModal:function(){this.showModal=!1,this.getAllWarehoues()}},created:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllWarehoues();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),components:{DxDataGrid:n.DxDataGrid,DxColumn:n.DxColumn,DxEditing:n.DxEditing,DxButton:s.a,DxPager:n.DxPager,DxPaging:n.DxPaging,DxSearchPanel:n.DxSearchPanel,DxSummary:n.DxSummary,DxTotalItem:n.DxTotalItem,DxLoadPanel:n.DxLoadPanel,WarehouseModal:d}},m=Object(u.a)(h,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isLoad?a("div",{staticClass:"loading"}):e._e(),e._v(" "),a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("piaf-breadcrumb")],1)],1),e._v(" "),a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("b-alert",{attrs:{show:"",variant:"info"}},[e._v("\n                Lista magazynów określa z których lokalizacji sumowane mają być stany magazynowe dla produktów\n            ")])],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12"}},[a("dx-data-grid",{attrs:{"data-source":e.warehouses,"show-borders":!0,noDataText:"Brak danych...","column-hiding-enabled":!0,columnAutoWidth:!0},on:{"toolbar-preparing":function(t){return e.onToolbarPreparing(t)}}},[a("dx-search-panel",{attrs:{visible:!0,width:250,placeholder:"Szukaj..."}}),e._v(" "),a("dx-paging",{attrs:{"page-size":e.pageSize}}),e._v(" "),a("dx-pager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":e.pageSizes,"show-info":!0,infoText:"Strona {0} z {1} dostępnych ({2} pozycji)"}}),e._v(" "),a("dx-column",{attrs:{buttons:e.editButtons,type:"buttons"}}),e._v(" "),a("dx-column",{attrs:{caption:"Symbol","allow-editing":!1,"data-field":"code"}}),e._v(" "),a("dx-column",{attrs:{caption:"Nazwa","allow-editing":!1,"data-field":"name"}}),e._v(" "),a("dx-summary",[a("dx-total-item",{attrs:{column:"code","summary-type":"count",displayFormat:"Ilość: {0}"}})],1)],1)],1)],1),e._v(" "),e.showModal?a("WarehouseModal",{attrs:{display:e.showModal,data:e.modalData},on:{changeDisplayModal:e.hideModal,changeLoader:e.changeLoader}}):e._e(),e._v(" "),a("b-modal",{ref:"modalDelete",attrs:{id:"modalDelete",size:"lg",title:"Zarządzaj magazynem",centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""}},[a("b-form",{ref:"formDelete",attrs:{id:"formDelete"},on:{submit:function(t){return t.preventDefault(),e.confirmDelete(t)}}},[a("b-row",[a("b-colxx",{attrs:{xs:"12"}},[a("h6",[e._v("Czy chcesz usunąć magazyn "),a("b",[e._v(e._s(e.deleteObject.name))]),e._v(" z listy magazynów z których sumowane mają być stany magazynowe dla produktów?")])])],1)],1),e._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{attrs:{type:"button",variant:"outline-primary"},on:{click:function(t){return e.$refs.modalDelete.hide()}}},[e._v("Nie")]),e._v(" "),a("b-button",{attrs:{type:"submit",variant:"primary",form:"formDelete"}},[e._v("Tak")])],1)],2)],1)}),[],!1,null,null,null);t.default=m.exports}}]);