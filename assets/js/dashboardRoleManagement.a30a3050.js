(window.webpackJsonp=window.webpackJsonp||[]).push([["dashboardRoleManagement"],{6191:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("2b0e"),i=a.default||a,o=n("5cf5"),r=n("d710"),s=i.extend({extends:r.DxComponent,props:{accessKey:String,activeStateEnabled:Boolean,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,icon:String,onClick:Function,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,stylingMode:String,tabIndex:Number,template:{},text:String,type:String,useSubmitBehavior:Boolean,validationGroup:String,visible:Boolean,width:[Function,Number,String]},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=o.default}});t.DxButton=s,t.default=s},"6c60":function(e,t,n){"use strict";n.r(t);var a=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),i=(n("96cf"),n("3b8d")),o=(n("7f7f"),n("d30a")),r=(n("6191"),n("2f62")),s=n("4df8");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var c={data:function(){return{isLoad:!0,modalData:{},pageSizes:[5,10,20],pageSize:10,editButtons:[{hint:this.L("Edytuj"),icon:"edit",visible:function(e){return!0===abp.auth.hasPermission("Pages.RoleManagement.Read")&&!0===abp.auth.hasPermission("Pages.RoleManagement.Update")},onClick:this.editClick},{disabled:!0,hint:this.L("Podgląd"),icon:"find",visible:function(e){return!0===abp.auth.hasPermission("Pages.RoleManagement.Read")&&!1===abp.auth.hasPermission("Pages.RoleManagement.Update")},onClick:this.editClick},{hint:this.L("Usuń"),icon:"trash",visible:function(e){return abp.auth.hasPermission("Pages.RoleManagement.Delete")},onClick:this.deleteClick}],deleteModalTitle:"",deleteObject:{},tenants:[{id:null,name:"HOST"},{id:1,name:"USER"}],tenantObject:{id:null,name:"HOST"}}},methods:{isGranted:function(e){return!!abp.auth.hasPermission(e)},changeSelectedTenant:function(){this.selectedTenant=this.tenantObject,this.$notify("success filled","Wybór rodzaju","Zarządzasz uprawnieniami dla ".concat(this.tenantObject.name),{duration:3e3,permanent:!1})},getRoles:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("role/getAllRoles");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),onToolbarPreparing:function(e){!0===abp.auth.hasPermission("Pages.RoleManagement.Read")&&!0===abp.auth.hasPermission("Pages.RoleManagement.Create")&&e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"add",onClick:this.createClick}})},createClick:function(e){void 0===this.selectedTenant&&this.isHostTenant?this.$notify("error filled","Wybór rodzaju","Wybierz rodzaj uprawnień w celu dodania nowej roli",{duration:3e3,permanent:!1}):this.$router.push({path:"rola/dodaj"})},editClick:function(e){void 0===this.selectedTenant&&this.isHostTenant?this.$notify("error filled","Wybór rodzaju","Wybierz rodzaj uprawnień w celu edycji roli",{duration:3e3,permanent:!1}):this.$router.push({path:"rola/edytuj/".concat(e.row.data.id)})},deleteClick:function(e){void 0===this.selectedTenant&&this.isHostTenant?this.$notify("error filled","Wybór rodzaju","Wybierz rodzaj uprawnień w celu usunięcia roli",{duration:3e3,permanent:!1}):(this.deleteModalTitle="Potwierdzenie usunięcia roli ".concat(e.row.data.displayName),this.deleteObject=e.row.data,this.$refs.modalDelete.show())},confirmDelete:function(){var e=this;this.isLoad=!0;var t={Id:this.deleteObject.id};this.$store.dispatch("role/delete",t).then((function(t){e.$refs.modalDelete.hide(),e.$notify("success filled","Potwierdzenie","Rola ".concat(e.deleteObject.displayName," została usunięta"),{duration:3e3,permanent:!1}),e.getRoles(),e.isLoad=!1})).catch((function(e){this.isLoad=!1}))},hideModal:function(e){this.$refs[e].hide()}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(r.b)({roles:"role/getRoleList",totalCount:"role/getTotalCount",tenant:"role/getCookieTenant"}),{rolesToEdit:function(){var e=this;return this.isHostTenant&&null!==this.tenant?this.roles.filter((function(t){return t.tenantId===e.tenant.id})):this.roles},isHostTenant:function(){return null===abp.session.tenantId},selectedTenant:{get:function(){return null==abp.utils.getCookieValue("Abp.Tenant.Selected")?{id:null,name:"HOST"}:JSON.parse(abp.utils.getCookieValue("Abp.Tenant.Selected"))},set:function(e){this.$store.commit("role/setCookieTenant",e)}}}),created:function(){var e=Object(i.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getRoles(),null!==this.tenant?this.tenantObject=this.tenant:this.$store.commit("role/setCookieTenant",{id:null,name:"HOST"});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),watch:{roles:function(e){this.isLoad=!1}},components:{DxDataGrid:o.DxDataGrid,DxColumn:o.DxColumn,DxPager:o.DxPager,DxPaging:o.DxPaging,DxSearchPanel:o.DxSearchPanel,DxSummary:o.DxSummary,DxTotalItem:o.DxTotalItem,vSelectComponent:s.a}},d=n("2877"),u=Object(d.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isLoad?n("div",{staticClass:"loading"}):e._e(),e._v(" "),n("b-row",[n("b-colxx",{attrs:{xxs:"12"}},[n("piaf-breadcrumb")],1)],1),e._v(" "),e.isHostTenant?n("b-row",[n("b-colxx",{attrs:{xxs:"12",sm:"6",md:"4"}},[n("b-form-group",{staticClass:"mb-0 pb-0",attrs:{label:"Wybrany rodzaj:"}},[n("vSelectComponent",{attrs:{options:e.tenants,label:e._f("l")("Nazwa"),placeholder:e._f("l")("Wybierz typ"),requiredForm:""},on:{input:e.changeSelectedTenant},model:{value:e.tenantObject,callback:function(t){e.tenantObject=t},expression:"tenantObject"}}),e._v(" "),n("small",[e._v(e._s(e._f("l")("Wybierz typ uprawnień w celu zarządzania rolami")))])],1)],1)],1):e._e(),e._v(" "),n("b-row",[n("b-colxx",{attrs:{xxs:"12"}},[n("dx-data-grid",{attrs:{"data-source":e.rolesToEdit,noDataText:e._f("l")("Brak danych..."),"show-row-lines":!0,"column-hiding-enabled":!0,"row-alternation-enabled":!0,columnAutoWidth:!0},on:{"toolbar-preparing":function(t){return e.onToolbarPreparing(t)}}},[n("dx-search-panel",{attrs:{visible:!0,width:250,placeholder:e._f("l")("Szukaj...")}}),e._v(" "),n("dx-paging",{attrs:{"page-size":e.pageSize}}),e._v(" "),n("dx-pager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":e.pageSizes,"show-info":!0,infoText:e._f("l")("Strona {0} z {1} dostępnych ({2} pozycji)")}}),e._v(" "),n("dx-column",{attrs:{buttons:e.editButtons,type:"buttons"}}),e._v(" "),n("dx-column",{attrs:{caption:e._f("l")("Rola"),"allow-editing":!1,"data-field":"name"}}),e._v(" "),n("dx-column",{attrs:{caption:e._f("l")("Typ"),visible:e.isHostTenant,"allow-editing":!1,"data-field":"tenantName"}}),e._v(" "),n("dx-column",{attrs:{caption:e._f("l")("Data utworzenia"),"allow-editing":!1,"data-field":"creationTime","data-type":"date",format:"yyyy-MM-dd HH:mm:ss"}}),e._v(" "),n("dx-column",{attrs:{caption:e._f("l")("Domyślna"),"allow-editing":!1,"data-field":"isDefault"}}),e._v(" "),n("dx-summary",[n("dx-total-item",{attrs:{column:e._f("l")("typ"),"summary-type":"count",displayFormat:"Ilość: {0}"}})],1)],1)],1)],1),e._v(" "),n("b-modal",{ref:"modalDelete",attrs:{id:"modalDelete",size:"md",title:e.deleteModalTitle,centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""}},[n("b-form",{ref:"formDelete",attrs:{id:"formDelete"},on:{submit:function(t){return t.preventDefault(),e.confirmDelete(t)}}},[n("b-row",[n("b-colxx",{attrs:{xs:"12"}},[n("h6",[e._v(e._s(e._f("l")("Czy chcesz usunąć role"))+"?")])])],1)],1),e._v(" "),n("template",{slot:"modal-footer"},[n("b-button",{staticClass:"col-2",attrs:{type:"button",variant:"outline-primary"},on:{click:function(t){return e.hideModal("modalDelete")}}},[e._v(e._s(e._f("l")("Nie")))]),e._v(" "),n("b-button",{staticClass:"col-2",attrs:{type:"submit",variant:"primary",form:"formDelete"}},[e._v(e._s(e._f("l")("Tak")))])],1)],2)],1)}),[],!1,null,null,null);t.default=u.exports}}]);