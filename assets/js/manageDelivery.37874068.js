(window.webpackJsonp=window.webpackJsonp||[]).push([["manageDelivery"],{1798:function(e,t,a){"use strict";var i=a("5d61");a.n(i).a},"2e61":function(e,t,a){"use strict";a.r(t);var i=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),o=(a("96cf"),a("3b8d")),n=(a("7f7f"),a("d30a")),r=a("6191"),s=a.n(r),l=(a("5d4a"),a("2f62")),d=(a("7514"),a("5c47")),c=a("4df8"),u={props:["display","data","deliveryTypes"],data:function(){return{isLoad:!1,deliveryType:void 0}},methods:{saveDelivery:function(){this.isLoad=!0;var e=this,t={id:this.data.id,isActive:this.data.isActive,inForeignCurrency:this.data.inForeignCurrency,displayName:this.data.displayName,name:this.data.displayName.toUpperCase(),code:this.normalizeText(this.data.displayName),icon:this.data.icon,description:this.data.description,valueNet:this.data.valueNet,valueGross:this.data.valueGross,freeDelivery:this.data.freeDelivery,freeDeliveryAbove:this.data.freeDeliveryAbove,order:this.data.order,inPackage:this.data.inPackage,deliveryId:this.data.deliveryId};void 0===this.data.id?this.$store.dispatch("delivery/create",t).then((function(a){e.$notify("success filled","Zapis sposobu dostawy","Sposób dostawy ".concat(t.name," został dodany"),{duration:3e3,permanent:!1}),e.activeModal=!1,e.isLoad=!1})).catch((function(t){e.isLoad=!1})):this.$store.dispatch("delivery/update",t).then((function(a){e.$notify("success filled","Zapis sposobu dostawy","Sposób dostawy ".concat(t.name," został zaktualizowany"),{duration:3e3,permanent:!1}),e.activeModal=!1,e.isLoad=!1})).catch((function(t){e.isLoad=!1}))}},mounted:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.deliveryTypes.find((function(e){return e.id==a.data.deliveryId})))&&(this.deliveryType=t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),computed:{activeModal:{get:function(){return this.display},set:function(e){this.$emit("changeDisplayModal",e)}}},watch:{deliveryType:function(e){e?(this.data.deliveryId=e.id,this.data.description=e.description,this.data.name=e.name.toUpperCase()):(this.data.deliveryId=void 0,this.data.description=void 0,this.data.name=void 0),this.data.displayName&&e?this.data.name="".concat(this.data.displayName.toUpperCase()," - ").concat(e.name.toUpperCase()):this.data.displayName&&!e&&(this.data.name="".concat(this.data.displayName.toUpperCase()))},"data.valueGross":function(e){var t=(1*this.data.valueGross).toFixed(2);this.data.valueNet=(t/1.23).toFixed(2)},"data.displayName":function(e){this.data.name=e.toUpperCase(),this.deliveryType&&e?this.data.name="".concat(e.toUpperCase()," - ").concat(this.deliveryType.name.toUpperCase()):this.deliveryType&&!e&&(this.data.name=this.deliveryType.name.toUpperCase())}},components:{Switches:d.a,vSelectComponent:c.a}},p=a("2877"),f=Object(p.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isLoad?a("div",{staticClass:"loading"}):e._e(),e._v(" "),a("b-modal",{ref:"modalDelivery",attrs:{id:"modalDelivery",size:"lg",title:e._f("l")("Zarządzaj dostawami"),centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""},model:{value:e.activeModal,callback:function(t){e.activeModal=t},expression:"activeModal"}},[a("b-form",{ref:"formDelivery",attrs:{id:"formDelivery"},on:{submit:function(t){return t.preventDefault(),e.saveDelivery(t)}}},[a("b-row",[a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:e._f("l")("Status dostawy")}},[a("div",{staticClass:"d-flex align-items-center"},[a("switches",{staticClass:"mb-0",attrs:{theme:"custom",color:"primary-inverse"},model:{value:e.data.isActive,callback:function(t){e.$set(e.data,"isActive",t)},expression:"data.isActive"}}),e._v(" "),a("p",{staticClass:"mb-0 pl-2",staticStyle:{cursor:"pointer"}},[e.data.isActive?a("span",[e._v(e._s(e._f("l")("aktywny")))]):a("span",[e._v(e._s(e._f("l")("nieaktywny")))])])],1)])],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:e._f("l")("Koszty w walucie")}},[a("div",{staticClass:"d-flex align-items-center"},[a("switches",{staticClass:"mb-0",attrs:{theme:"custom",color:"primary-inverse"},model:{value:e.data.inForeignCurrency,callback:function(t){e.$set(e.data,"inForeignCurrency",t)},expression:"data.inForeignCurrency"}}),e._v(" "),a("p",{staticClass:"mb-0 pl-2",staticStyle:{cursor:"pointer"}},[e.data.inForeignCurrency?a("span",[e._v(e._s(e._f("l")("obcej")))]):a("span",[e._v(e._s(e._f("l")("krajowej")))])])],1)])],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:e._f("l")("Kolejność")}},[a("b-form-input",{attrs:{placeholder:e._f("l")("Kolejność"),type:"text"},model:{value:e.data.order,callback:function(t){e.$set(e.data,"order",t)},expression:"data.order"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:e._f("l")("Ikona")}},[a("b-form-input",{attrs:{required:"",placeholder:e._f("l")("Ikona"),type:"text"},model:{value:e.data.icon,callback:function(t){e.$set(e.data,"icon",t)},expression:"data.icon"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:e._f("l")("Wyświetlana nazwa")}},[a("b-form-input",{attrs:{required:"",placeholder:e._f("l")("Wyświetlana nazwa"),type:"text"},model:{value:e.data.displayName,callback:function(t){e.$set(e.data,"displayName",t)},expression:"data.displayName"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:e._f("l")("Nazwa")}},[a("b-form-input",{attrs:{disabled:"",placeholder:e._f("l")("Nazwa"),type:"text"},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}})],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:e._f("l")("Ilość sztuk w paczce")}},[a("b-form-input",{attrs:{required:"",placeholder:e._f("l")("Ilość w paczce"),type:"number",min:"1",step:"1"},model:{value:e.data.inPackage,callback:function(t){e.$set(e.data,"inPackage",t)},expression:"data.inPackage"}})],1)],1)],1),e._v(" "),a("b-row",[a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:e._f("l")("Darmowa dostawa")}},[a("div",{staticClass:"d-flex align-items-center"},[a("switches",{staticClass:"mb-0",attrs:{theme:"custom",color:"primary-inverse"},model:{value:e.data.freeDelivery,callback:function(t){e.$set(e.data,"freeDelivery",t)},expression:"data.freeDelivery"}}),e._v(" "),a("p",{staticClass:"mb-0 pl-2",staticStyle:{cursor:"pointer"}},[e.data.freeDelivery?a("span",[e._v(e._s(e._f("l")("tak")))]):a("span",[e._v(e._s(e._f("l")("nie")))])])],1)])],1)],1),e._v(" "),!0===e.data.freeDelivery?a("b-row",[a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:e._f("l")("Darmowa dostawa powyżej")}},[a("b-input-group",{attrs:{append:"zł"}},[a("b-form-input",{attrs:{placeholder:"0",min:"0",step:"any",type:"number"},model:{value:e.data.freeDeliveryAbove,callback:function(t){e.$set(e.data,"freeDeliveryAbove",t)},expression:"data.freeDeliveryAbove"}})],1)],1)],1)],1):e._e(),e._v(" "),a("b-row",[a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:e._f("l")("Wartość netto")}},[a("b-input-group",{attrs:{append:""}},[a("b-form-input",{attrs:{required:"",disabled:"",placeholder:e._f("l")("Wartość netto"),min:"0",step:"any",type:"number"},model:{value:e.data.valueNet,callback:function(t){e.$set(e.data,"valueNet",t)},expression:"data.valueNet"}})],1)],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:e._f("l")("Wartość brutto")}},[a("b-input-group",{attrs:{append:""}},[a("b-form-input",{attrs:{required:"",placeholder:e._f("l")("Wartość brutto"),min:"0",step:"any",type:"number"},model:{value:e.data.valueGross,callback:function(t){e.$set(e.data,"valueGross",t)},expression:"data.valueGross"}})],1)],1)],1),e._v(" "),a("b-colxx",{attrs:{xxs:"12"}},[a("b-form-group",{attrs:{label:e._f("l")("Opis")}},[a("b-form-textarea",{attrs:{id:"textarea",placeholder:e._f("l")("Opis"),rows:"4","max-rows":"6"},model:{value:e.data.description,callback:function(t){e.$set(e.data,"description",t)},expression:"data.description"}})],1)],1)],1)],1),e._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{staticClass:"squared",attrs:{type:"button",variant:"outline-primary"},on:{click:function(t){e.activeModal=!1}}},[e._v(e._s(e._f("l")("Anuluj")))]),e._v(" "),a("b-button",{staticClass:"squared",attrs:{type:"submit",variant:"primary",form:"formDelivery"}},[e._v(e._s(e._f("l")("Zapisz")))])],1)],2)],1)}),[],!1,null,null,null).exports;function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}var v={data:function(){return{isLoad:!1,showModal:!1,modalData:{},editButtons:[{hint:this.L("Edytuj"),icon:"edit",onClick:this.editClick},{hint:"Usuń",icon:"trash",onClick:this.deleteClick}],deleteModalTitle:"",deleteObject:{},deliveryTypes:[]}},methods:{calculateCellValue:function(e){return this.$options.filters.currency(e.valueGross)},onToolbarPreparing:function(e){e.toolbarOptions.items.unshift({location:"after",widget:"dxButton",options:{icon:"add",hint:this.L("Dodaj"),onClick:this.createClick}})},createClick:function(e){this.showModal=!0,this.modalData={},this.modalData.inPackage=1,this.modalData.icon="fas fa-truck",this.modalData.order=0},editClick:function(e){this.showModal=!0,this.modalData=Object.assign({},e.row.data)},deleteClick:function(e){this.deleteModalTitle="Potwierdzenie usunięcia metody dostawy",this.deleteObject=e.row.data,this.$refs.modalDelete.show()},confirmDelete:function(){var e=this;this.isLoad=!0;var t={Id:this.deleteObject.id};this.$store.dispatch("delivery/delete",t).then((function(t){e.$refs.modalDelete.hide(),e.$notify("success filled","Potwierdzenie","Metoda dostawy ".concat(e.deleteObject.name," została usunięta"),{duration:3e3,permanent:!1}),e.getData(),e.isLoad=!1})).catch((function(e){this.isLoad=!1}))},hideModal:function(){this.showModal=!1,this.getDeliveries()},getDeliveries:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoad=!0,t=this,e.next=4,this.$store.dispatch("delivery/getAll").then((function(e){t.isLoad=!1})).catch((function(e){t.isLoad=!1}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getDeliveryTypes:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.$store.dispatch("delivery/getDeliveryTypes").then((function(e){t.deliveryTypes=e})).catch((function(e){t.isLoad=!1}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(l.b)({deliveries:"delivery/getAllDeliveries",totalCount:"delivery/getTotalCount",pageSize:"delivery/getPageSize",pageSizes:"delivery/getPageSizes"})),created:function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoad=!0,e.next=3,this.getDeliveries();case 3:return e.next=5,this.getDeliveryTypes();case 5:this.$nextTick((function(){t.isLoad=!1}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),components:{DxDataGrid:n.DxDataGrid,DxColumn:n.DxColumn,DxEditing:n.DxEditing,DxButton:s.a,DxPager:n.DxPager,DxPaging:n.DxPaging,DxSearchPanel:n.DxSearchPanel,DxSummary:n.DxSummary,DxTotalItem:n.DxTotalItem,DxLoadPanel:n.DxLoadPanel,DeliveryModal:f}},b=Object(p.a)(v,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isLoad?a("div",{staticClass:"loading"}):e._e(),e._v(" "),a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("piaf-breadcrumb")],1)],1),e._v(" "),a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("dx-data-grid",{attrs:{"data-source":e.deliveries,"show-row-lines":!0,"column-hiding-enabled":!0,"row-alternation-enabled":!0,columnAutoWidth:!0,noDataText:"Brak danych..."},on:{"toolbar-preparing":function(t){return e.onToolbarPreparing(t)}},scopedSlots:e._u([{key:"iconCellTemplate",fn:function(e){var t=e.data;return[a("i",{class:t.data.icon+" fa-2x"})]}}])},[a("dx-search-panel",{attrs:{visible:!0,width:250,placeholder:e._f("l")("Szukaj...")}}),e._v(" "),a("dx-paging",{attrs:{"page-size":e.pageSize}}),e._v(" "),a("dx-pager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":e.pageSizes,"show-info":!0,infoText:e._f("l")("Strona {0} z {1} dostępnych ({2} pozycji)")}}),e._v(" "),a("dx-column",{attrs:{buttons:e.editButtons,type:"buttons"}}),e._v(" "),a("dx-column",{attrs:{caption:e._f("l")("Nazwa"),"allow-editing":!1,"data-field":"name"}}),e._v(" "),a("dx-column",{attrs:{caption:e._f("l")("Nazwa wyświetlana"),"allow-editing":!1,"data-field":"displayName"}}),e._v(" "),a("dx-column",{attrs:{caption:e._f("l")("Ikona"),"cell-template":"iconCellTemplate"}}),e._v(" "),a("dx-column",{attrs:{caption:e._f("l")("Aktywny"),"allow-editing":!1,"data-field":"isActive"}}),e._v(" "),a("dx-column",{attrs:{caption:e._f("l")("Darmowa dostawa"),"allow-editing":!1,"data-field":"freeDelivery"}}),e._v(" "),a("dx-column",{attrs:{caption:e._f("l")("Wartość brutto"),"allow-editing":!1,"calculate-cell-value":e.calculateCellValue}}),e._v(" "),a("dx-summary",[a("dx-total-item",{attrs:{column:"name","summary-type":"count",displayFormat:e._f("l")("Ilość: {0}")}})],1)],1),e._v(" "),a("b-modal",{ref:"modalDelete",attrs:{id:"modalDelete",size:"md",title:e.L(e.deleteModalTitle)+" "+e.deleteObject.name,centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""}},[a("b-form",{ref:"formDelete",attrs:{id:"formDelete"},on:{submit:function(t){return t.preventDefault(),e.confirmDelete(t)}}},[a("b-row",[a("b-colxx",{attrs:{xs:"12"}},[a("h6",[e._v(e._s(e._f("l")("Czy chcesz usunąć metodę dostawy?")))])])],1)],1),e._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{staticClass:"col-2",attrs:{type:"button",variant:"outline-primary"},on:{click:function(t){return e.$refs.modalDelete.hide()}}},[e._v(e._s(e._f("l")("Nie")))]),e._v(" "),a("b-button",{staticClass:"col-2",attrs:{type:"submit",variant:"primary",form:"formDelete"}},[e._v(e._s(e._f("l")("Tak")))])],1)],2)],1)],1),e._v(" "),e.showModal?a("DeliveryModal",{attrs:{display:e.showModal,data:e.modalData,deliveryTypes:e.deliveryTypes},on:{changeDisplayModal:e.hideModal}}):e._e()],1)}),[],!1,null,null,null);t.default=b.exports},"5c47":function(e,t,a){"use strict";var i=a("bd86"),o={name:"switches",props:{typeBold:{default:!1},value:{default:!1},disabled:{default:!1},label:{default:""},textEnabled:{default:""},textDisabled:{default:""},color:{default:"default"},theme:{default:"default"},emitOnMount:{default:!0}},mounted:function(){this.emitOnMount&&this.$emit("input",this.value)},methods:{trigger:function(e){this.$emit("input",e.target.checked)}},computed:{classObject:function(){var e,t=this.color,a=this.value,o=this.theme,n=this.typeBold,r=this.disabled;return e={"vue-switcher":!0},Object(i.a)(e,"vue-switcher--unchecked",!a),Object(i.a)(e,"vue-switcher--disabled",r),Object(i.a)(e,"vue-switcher--bold",n),Object(i.a)(e,"vue-switcher--bold--unchecked",n&&!a),Object(i.a)(e,"vue-switcher-theme--".concat(o),t),Object(i.a)(e,"vue-switcher-color--".concat(t),t),e},shouldShowLabel:function(){return""!==this.label||""!==this.textEnabled||""!==this.textDisabled}}},n=(a("1798"),a("2877")),r=Object(n.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{class:e.classObject},[e.shouldShowLabel?a("span",{staticClass:"vue-switcher__label"},[e.label?a("span",{domProps:{textContent:e._s(e.label)}}):e._e(),e._v(" "),!e.label&&e.value?a("span",{domProps:{textContent:e._s(e.textEnabled)}}):e._e(),e._v(" "),e.label||e.value?e._e():a("span",{domProps:{textContent:e._s(e.textDisabled)}})]):e._e(),e._v(" "),a("input",{attrs:{type:"checkbox",disabled:e.disabled},domProps:{checked:e.value},on:{change:e.trigger}}),e._v(" "),a("div")])}),[],!1,null,null,null);t.a=r.exports},"5d4a":function(e,t,a){"use strict";var i=a("03cb"),o=a("8a64"),n=a("061a"),r=a("7585");a("3626"),t.locale=i.locale.bind(i),t.loadMessages=o.load.bind(o),t.formatMessage=o.format.bind(o),t.formatNumber=n.format.bind(n),t.parseNumber=n.parse.bind(n),t.formatDate=r.format.bind(r),t.parseDate=r.parse.bind(r),t.message=o,t.number=n,t.date=r,t.disableIntl=function(){"intl"===n.engine()&&n.resetInjection(),"intl"===r.engine()&&r.resetInjection()}},"5d61":function(e,t,a){},6191:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("2b0e"),o=i.default||i,n=a("5cf5"),r=a("d710"),s=o.extend({extends:r.DxComponent,props:{accessKey:String,activeStateEnabled:Boolean,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,icon:String,onClick:Function,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,stylingMode:String,tabIndex:Number,template:{},text:String,type:String,useSubmitBehavior:Boolean,validationGroup:String,visible:Boolean,width:[Function,Number,String]},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=n.default}});t.DxButton=s,t.default=s}}]);