(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e180284a"],{"0ccc":function(t,e,a){"use strict";a.r(e);var n=(a("96cf"),a("3b8d")),r=a("a6e5"),i=a("5da7"),s={data:function(){return{isLoaded:!1,orders:[],showModal:!1,modalObject:{},optionsState:[]}},created:function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getLastOrders();case 2:return t.next=4,Object(i.a)("OrderState");case 4:this.optionsState=t.sent,this.$nextTick((function(){e.isLoaded=!0}));case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),methods:{getLastOrders:function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,this.$store.dispatch("profile/getLastOrders").then((function(t){e.orders=t})).catch((function(t){e.isLoaded=!1}));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),showOrderElements:function(t){this.showModal=!0,this.modalObject=t}},components:{OrderModal:r.a}},o=a("2877"),c=Object(o.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",[a("b-colxx",{staticClass:"text-primary",attrs:{xxs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-primary"},[a("div",{staticClass:"align-self-center"},[a("h4",{staticClass:"mb-0"},[t._v("Lista ostatnich zamówień")])])])]),t._v(" "),a("b-colxx",{attrs:{xxs:"12"}},[a("b-card",{staticStyle:{"min-height":"220px"},attrs:{"no-body":""}},[t.isLoaded?a("div",{staticClass:"card-body p-3"},[t.orders.length>0?a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-hover table-hover-click"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Numer dokumentu")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Data utworzenia")]),t._v(" "),"true"===t.getSettingValue("App.UserManagement.NettoBrutto")?a("th",{attrs:{scope:"col"}},[t._v("\n                                        Wartość brutto\n                                    ")]):a("th",{attrs:{scope:"col"}},[t._v("\n                                        Wartość netto\n                                    ")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Status")])])]),t._v(" "),a("tbody",t._l(t.orders,(function(e,n){return a("tr",{key:n,on:{click:function(a){return a.preventDefault(),t.showOrderElements(e)}}},[a("td",{staticClass:"font-weight-bold"},[t._v(t._s(n+1))]),t._v(" "),a("td",[t._v(t._s(e.numberString))]),t._v(" "),a("td",[t._v(t._s(t.$moment(e.orderDate).format("YYYY-MM-DD")))]),t._v(" "),"true"===t.getSettingValue("App.UserManagement.NettoBrutto")?a("td",[t._v("\n                                        "+t._s(t._f("currency")(e.totalValueGross,{symbol:e.currency}))+"\n                                    ")]):a("td",[t._v("\n                                        "+t._s(t._f("currency")(e.totalValueNet,{symbol:e.currency}))+"\n                                    ")]),t._v(" "),a("td",[a("b-badge",{staticClass:"mb-1",attrs:{variant:"primary"}},[t._v(t._s(e.stateName))])],1)])})),0)])]):a("div",[a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[t._v("\n                                Brak zamówień\n                            ")])],1)],1)]):a("div",{staticClass:"card-body d-flex align-items-center justify-content-center p-3"},[a("div",{staticClass:"loading-div",staticStyle:{width:"40px",height:"40px"}})])])],1)],1),t._v(" "),a("OrderModal",{attrs:{display:t.showModal,data:t.modalObject,optionsState:t.optionsState},on:{changeDisplayModal:function(e){t.showModal=!1}}})],1)}),[],!1,null,null,null);e.default=c.exports},"5d4a":function(t,e,a){"use strict";var n=a("03cb"),r=a("8a64"),i=a("061a"),s=a("7585");a("3626"),e.locale=n.locale.bind(n),e.loadMessages=r.load.bind(r),e.formatMessage=r.format.bind(r),e.formatNumber=i.format.bind(i),e.parseNumber=i.parse.bind(i),e.formatDate=s.format.bind(s),e.parseDate=s.parse.bind(s),e.message=r,e.number=i,e.date=s,e.disableIntl=function(){"intl"===i.engine()&&i.resetInjection(),"intl"===s.engine()&&s.resetInjection()}},"5da7":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a("a481"),a("96cf");var n=a("3b8d"),r=a("c276"),i=function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={type:e},t.next=3,r.a.ajax.get("/api/services/app/Dictionaries/GetEnumValues",{params:a});case 3:return n=t.sent,t.abrupt("return",n.data.result);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},6191:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("2b0e"),r=n.default||n,i=a("5cf5"),s=a("d710"),o=r.extend({extends:s.DxComponent,props:{accessKey:String,activeStateEnabled:Boolean,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,icon:String,onClick:Function,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,stylingMode:String,tabIndex:Number,template:{},text:String,type:String,useSubmitBehavior:Boolean,validationGroup:String,visible:Boolean,width:[Function,Number,String]},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=i.default}});e.DxButton=o,e.default=o},"636c":function(t,e,a){"use strict";var n=(a("7f7f"),a("96cf"),a("3b8d")),r={props:["display","data"],data:function(){return{bankingGroups:[]}},mounted:function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.$emit("changeLoader",!0),t.next=3,this.getBankingGroups();case 3:this.$emit("changeLoader",!1);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),methods:{getBankingGroups:function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("payment/getBankingGroups");case 2:this.bankingGroups=t.sent;case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),selectBankGroup:function(t){this.data.payment.bankGroup=this.bankingGroups[t.id],this.getBankingGroups(),this.$emit("setSelectedOptions",{calculate:!1,type:"bankGroup",object:this.data.payment.bankGroup}),this.$notify("success filled","Sposób płatności","Sposób płatności została zmieniona na <b>"+t.name+"</b>")}},computed:{activeModal:{get:function(){return this.display},set:function(t){this.$emit("changeDisplayModal",t)}}}},i=a("2877"),s=Object(i.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{ref:"modalBankingGroups",attrs:{id:"modalBankingGroups",size:"lg",title:"Wybierz sposób płatności",centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""},model:{value:t.activeModal,callback:function(e){t.activeModal=e},expression:"activeModal"}},[a("b-row",{staticClass:"shopping-cart"},t._l(t.bankingGroups,(function(e,n){return a("b-colxx",{key:n,staticClass:"mb-3",attrs:{xxs:"6",md:"3"}},[a("b-card",{staticClass:"bank-group",class:{active:void 0!==t.data.payment.bankGroup&&e.id===t.data.payment.bankGroup.id},attrs:{"no-body":""},on:{click:function(a){return t.selectBankGroup(e)}}},[a("b-card-body",{staticClass:"text-center bank-group-body"},[void 0!==t.data.payment.bankGroup&&e.id===t.data.payment.bankGroup.id?a("div",{staticClass:"selected-address"},[a("i",{staticClass:"fas fa-check fa-2x text-primary"})]):t._e(),t._v(" "),a("div",{staticClass:"w-100 text-center"},[a("img",{staticClass:"card-img-top",attrs:{src:e.img}})]),t._v(" "),a("div",{staticClass:"w-100 pt-2 text-center"},[a("p",{staticClass:"mb-0 pb-0"},[t._v(t._s(e.name))])])])],1)],1)})),1),t._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{attrs:{type:"button",variant:"outline-primary",disabled:!t.data.payment.bankGroup},on:{click:function(e){return t.$emit("doAction")}}},[t._v("Złóż zamówiewnie i przejdź do płatności")]),t._v(" "),a("b-button",{attrs:{type:"button",variant:"primary"},on:{click:function(e){t.activeModal=!1}}},[t._v("Zamknij")])],1)],2)],1)}),[],!1,null,null,null);e.a=s.exports},a6e5:function(t,e,a){"use strict";var n=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),r=(a("96cf"),a("3b8d")),i=a("d30a"),s=a("6191"),o=a.n(s),c=(a("5d4a"),a("636c")),l=a("2f62");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}var u={props:["display","data","optionsState"],data:function(){return{isLoad:!1,totalCount:0,orderElements:[],selectedStatus:null,showBankingGroupsModal:!1,bankingGroupsModalObject:{payment:{}}}},methods:{getPackageLabel:function(t){var e=document.createElement("a");e.href="".concat(AppConst.appBaseUrl,"trackingNumbers/").concat(this.data.trackingNumber,".pdf"),e.download="".concat(this.data.trackingNumber,".pdf"),document.body.appendChild(e),e.click(),document.body.removeChild(e),this.$notify("success filled","Etykieta","Pobrano etykietę listu przewozowego dla ".concat(this.data.trackingNumber,"."))},changeLoader:function(t){this.$emit("changeLoader",t)},payForOrder:function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.data.paymentNumber){t.next=4;break}return this.changeLoader(!0),location.href=this.data.paymentUrl,t.abrupt("return");case 4:if(!(0===this.data.state&&this.data.paymentMethodName&&this.data.paymentMethodName.indexOf("elektroniczna")>=0)||this.bankingGroupsModalObject.payment.bankGroup){t.next=8;break}this.showBankingGroupsModal=!0,t.next=21;break;case 8:return this.data.groupId=this.bankingGroupsModalObject.payment.bankGroup?this.bankingGroupsModalObject.payment.bankGroup.id:null,this.changeLoader(!0),t.prev=10,e={id:this.data.id,groupId:this.data.groupId},a=this,t.next=15,this.$store.dispatch("orders/payForOrder",e).then((function(t){a.$notify("success filled","Płatność za zamówienie","Płatność została wygenerowana. Za chwilę zostaniesz przekierowany na stronę płatności"),location.href=t})).catch((function(t){a.isLoad=!1}));case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(10),this.$notify("error filled","Błąd podczas generowania płatności","Skontaktuj się z administratorem"),this.changeLoader(!1);case 21:case"end":return t.stop()}}),t,this,[[10,17]])})));return function(){return t.apply(this,arguments)}}(),getOrderElements:function(){this.$emit("changeLoader",!0);var t={Id:this.data.id},e=this;this.$store.dispatch("orders/getOrderElements",t).then((function(t){e.orderElements=t.items,e.totalCount=t.totalCount,e.$emit("changeLoader",!1)})).catch((function(t){e.$emit("changeLoader",!1)}))},getDocumentDate:function(t){return moment(t).format("YYYY-MM-DD HH:mm:ss")},calculateCellNetValue:function(t){return this.$options.filters.currency(t.priceNet)},calculateCellGrossValue:function(t){return this.$options.filters.currency(t.priceGross)},changeOrderStatus:function(){this.$emit("changeOrderStatus",this.selectedStatus)}},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(l.b)({pageSize:"orders/getPageSizeElements",pageSizes:"orders/getPageSizesElements",loggedUser:"auth/currentUser"}),{activeModal:{get:function(){return this.display&&(this.orderElements={},this.getOrderElements()),this.display},set:function(t){this.$emit("changeDisplayModal",t)}}}),components:{DxDataGrid:i.DxDataGrid,DxColumn:i.DxColumn,DxEditing:i.DxEditing,DxButton:o.a,DxPager:i.DxPager,DxPaging:i.DxPaging,DxSearchPanel:i.DxSearchPanel,DxSummary:i.DxSummary,DxTotalItem:i.DxTotalItem,DxLoadPanel:i.DxLoadPanel,BankingGroupsModal:c.a}},p=a("2877"),m=Object(p.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoad?a("div",{staticClass:"loading"}):t._e(),t._v(" "),a("b-modal",{ref:"modalOrder",attrs:{id:"modalOrder",size:"xl",title:"Szczegóły zamówienia "+t.data.numberString,centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""},model:{value:t.activeModal,callback:function(e){t.activeModal=e},expression:"activeModal"}},[a("b-form",{ref:"formOrder",attrs:{id:"formOrder"},on:{submit:function(e){return e.preventDefault(),t.saveOrder(e)}}},[a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("ul",{staticClass:"fa-ul ml-3 mb-0"},[a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v(" \n                            Właściciel: "),a("b",[t._v(t._s(t.data.fullName))])]),t._v(" "),a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v(" \n                            Data dokumentu: "),a("b",[t._v(t._s(t.getDocumentDate(t.data.orderDate)))])]),t._v(" "),a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v(" \n                            Status zamówienia: "),a("b-badge",{attrs:{variant:"primary"}},[t._v(t._s(t.data.stateName))])],1),t._v(" "),a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v("\n                            Metoda płatności: "),a("b",[t._v(t._s(t.data.paymentMethodName))])]),t._v(" "),t.data.paymentMethodName&&t.data.paymentMethodName.indexOf("elektroniczna")>=0?a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v("\n                            Status płatności: "),a("b-badge",{attrs:{variant:"primary"}},[t._v(t._s(t.data.paymentStatusName))])],1):t._e(),t._v(" "),t.data.paymentStatus&&1===t.data.paymentStatus?a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v("\n                            Data płatności: "),a("b",[t._v(t._s(t.$moment(t.data.paymentTime).format("YYYY-MM-DD HH:mm:ss")))])]):t._e(),t._v(" "),a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v(" \n                            Sposób dostawy: "),a("b",[t._v(t._s(t.data.deliveryMethodName))])]),t._v(" "),a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v(" \n                            Koszt dostawy: "),a("b",[t._v(t._s(t._f("currency")(t.data.deliveryCost,{symbol:t.data.currency})))])]),t._v(" "),t.data.trackingNumber?a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v(" \n                            Numer listu przewozowego: "),a("b",[t._v(t._s(t.data.trackingNumber))])]):t._e()])]),t._v(" "),a("b-colxx",{attrs:{xxs:"12"}},[a("dx-data-grid",{attrs:{"data-source":t.orderElements,"show-borders":!0,"column-hiding-enabled":!0,columnAutoWidth:!0,noDataText:"Brak danych..."},scopedSlots:t._u([{key:"cellValueTemplate",fn:function(e){var a=e.data;return[t._v("\n                            "+t._s(t._f("currency")(a.value,{symbol:a.data.currency}))+"\n                        ")]}}])},[a("dx-load-panel",{attrs:{enabled:!0,message:"Trwa ładowanie..."}}),t._v(" "),a("dx-paging",{attrs:{enabled:!1}}),t._v(" "),a("dx-search-panel",{attrs:{visible:!0,width:250,placeholder:"Szukaj..."}}),t._v(" "),a("dx-paging",{attrs:{"page-size":t.pageSize}}),t._v(" "),a("dx-pager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":t.pageSizes,"show-info":!0,infoText:"Strona {0} z {1} dostępnych ({2} pozycji)"}}),t._v(" "),a("dx-column",{attrs:{caption:"Kod produktu","allow-editing":!1,"data-field":"code"}}),t._v(" "),a("dx-column",{attrs:{caption:"Nazwa produktu",width:500,"allow-editing":!1,"data-field":"name"}}),t._v(" "),a("dx-column",{attrs:{caption:"Ilość","allow-editing":!1,"data-field":"qty"}}),t._v(" "),a("dx-column",{attrs:{caption:"Cena netto","allow-editing":!1,"data-field":"priceNet","cell-template":"cellValueTemplate"}}),t._v(" "),"true"===t.getSettingValue("App.UserManagement.NettoBrutto")?a("dx-column",{attrs:{caption:"Cena brutto","allow-editing":!1,"data-field":"priceGross","cell-template":"cellValueTemplate"}}):t._e()],1)],1)],1),t._v(" "),6===t.data.state||7===t.data.state?a("b-row",[a("b-colxx",{staticClass:"pt-3",attrs:{xxs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-dark"},[a("div",{staticClass:"align-self-center"},[a("h6",{staticClass:"mb-0"},[t._v("List przewozowy")])])])]),t._v(" "),a("b-colxx",{attrs:{xxs:"12"}},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-hover table-hover-click table-deliveries"},[a("thead",[a("tr",[a("th",{staticClass:"align-middle",attrs:{width:"5%",scope:"col"}}),t._v(" "),a("th",{staticClass:"align-middle",attrs:{width:"30%",scope:"col"}},[t._v("Numer listu przewozowego")]),t._v(" "),a("th",{staticClass:"align-middle",attrs:{width:"65%",scope:"col"}},[t._v("Śledź przesyłkę")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticClass:"text-center align-middle",on:{click:function(e){return t.getPackageLabel()}}},[a("i",{staticClass:"fas fa-tag text-primary"})]),t._v(" "),a("td",{staticClass:"align-middle"},[t._v("\n                          "+t._s(t.data.trackingNumber)+"\n                        ")]),t._v(" "),a("td",{staticClass:"align-middle"},[a("a",{attrs:{target:"_blank",href:"https://sprawdz.dhl.com.pl/szukaj.aspx?m=0&sn="+t.data.trackingNumber}},[t._v(t._s("https://sprawdz.dhl.com.pl/szukaj.aspx?m=0&sn="+t.data.trackingNumber))])])])])])])])],1):t._e()],1),t._v(" "),a("template",{slot:"modal-footer"},[0===t.data.state&&t.data.paymentMethodName&&t.data.paymentMethodName.indexOf("elektroniczna")>=0&&0===t.data.paymentStatus&&t.data.userId===t.loggedUser.currentUser.id?a("b-button",{staticClass:"ml-2",attrs:{type:"button",variant:"outline-primary"},on:{click:t.payForOrder}},[t._v("Opłać zamówienie")]):t._e(),t._v(" "),a("b-button",{staticClass:"ml-2",attrs:{type:"button",variant:"outline-primary"},on:{click:function(e){t.activeModal=!1}}},[t._v("Zamknij")])],1)],2),t._v(" "),t.showBankingGroupsModal?a("BankingGroupsModal",{attrs:{display:t.showBankingGroupsModal,data:t.bankingGroupsModalObject},on:{changeLoader:t.changeLoader,changeDisplayModal:function(e){t.showBankingGroupsModal=!1,t.bankingGroupsModalObject.payment={}},doAction:t.payForOrder}}):t._e()],1)}),[],!1,null,null,null);e.a=m.exports}}]);