(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7caf1105"],{d54f:function(t,e,a){"use strict";a.r(e);var s=(a("96cf"),a("3b8d")),r=a("fa26"),o={props:["currentUser","type","selectedAddress"],data:function(){return{isLoaded:!1,addresses:[],countries:[],showModal:!1,modalObject:{},modalDeleteObject:void 0,userId:void 0,tenantId:void 0,selectedAddressId:void 0}},created:function(){var t=Object(s.a)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getCountries();case 2:return this.userId=this.currentUser.id,this.tenantId=this.currentUser.tenantId,t.next=6,this.getContractorRecipients();case 6:"shoppingCart"===this.type&&(this.selectedAddressId=this.selectedAddress),this.$nextTick((function(){e.isLoaded=!0}));case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),methods:{getCountries:function(){var t=Object(s.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,this.$store.dispatch("country/getCountries").then((function(t){e.countries=t}));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),getContractorRecipients:function(){var t=Object(s.a)(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isLoaded=!1,e={userId:this.userId,tenantId:this.tenantId},a=this,t.next=5,this.$store.dispatch("profile/getContractorRecipients",e).then((function(t){a.addresses=t,"shoppingCart"===a.type&&1===s.addresses.length&&(a.selectedAddressId=s.addresses[0].id,a.$emit("changeSelectedAddress",s.addresses[0],"dostawa")),a.isLoaded=!0})).catch((function(t){a.isLoaded=!1}));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),changeLoader:function(t){this.$emit("changeLoader",t)},deleteClick:function(t){this.modalDeleteObject=t,this.$refs.modalDelete.show()},confirmDelete:function(){this.changeLoader(!0);var t=this;this.$store.dispatch("profile/deleteRecipientAddress",this.modalDeleteObject).then((function(e){t.$notify("success filled","Zapis adresu dostawy","Adres dostawy został oznaczony jako nieaktywny"),t.$emit("reload"),t.$refs.modalDelete.hide(),t.modalDeleteObject={},t.getContractorRecipients(),t.changeLoader(!1)}))},addClick:function(){this.showModal=!0,this.modalObject={}},editClick:function(t){this.showModal=!0,this.modalObject=t},saveDelivery:function(t){this.changeLoader(!0);var e=this;void 0===t.id?(t.userId=this.userId,t.tenantId=this.tenantId,this.$store.dispatch("profile/createRecipientAddress",t).then((function(t){e.$notify("success filled","Zapis adresu dostawy","Adres dostawy został dodany prawidłowo"),e.$emit("reload"),e.showModal=!1,e.modalData={},e.getContractorRecipients(),e.changeLoader(!1)})).catch((function(t){e.changeLoader(!1)}))):this.$store.dispatch("profile/updateRecipientAddress",t).then((function(t){e.$notify("success filled","Zapis adresu dostawy","Adres dostawy został zapisany prawidłowo"),e.$emit("reload"),e.showModal=!1,e.modalData={},e.getContractorRecipients(),e.changeLoader(!1)})).catch((function(t){e.changeLoader(!1)}))},selectAddress:function(t){this.type&&"shoppingCart"===this.type&&(this.selectedAddressId=t.id,this.$emit("changeSelectedAddress",t,"dostawa"),this.$notify("success filled","Dane do dostawy zostały zmienione","Dane do dostawy zostały zmieniony na <b>".concat(t.companyName,"</b>, adres: ").concat(t.address),{duration:3e3,permanent:!1}))}},components:{DeliveryModal:r.a}},i=a("2877"),n=Object(i.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",[a("b-colxx",{staticClass:"text-primary",attrs:{xxs:"12"}},[a("div",{staticClass:"d-flex border-bottom border-primary"},["shoppingCart"===t.type?a("div",{staticClass:"d-flex align-self-center border-primary"},[a("div",{staticClass:"icon"},[a("i",{staticClass:"fas fa-cart-arrow-down fa-2x mr-2"})]),t._v(" "),a("div",{staticClass:"align-self-center"},[a("h3",{staticClass:"mb-0"},[t._v("Wybierz adres dostawy")])])]):a("div",{staticClass:"align-self-center border-primary"},[a("h4",{staticClass:"mb-0"},[t._v("Adresy dostaw")])]),t._v(" "),a("div",{staticClass:"align-self-center ml-auto text-primary"},[a("p",{staticClass:"mb-0",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.addClick()}}},[a("i",{staticClass:"fas fa-plus"}),t._v(" dodaj nowy adres dostawy")])])])]),t._v(" "),t.isLoaded?a("b-colxx",{attrs:{xxs:"12"}},[t.addresses.length>0?a("b-row",t._l(t.addresses,(function(e,s){return a("b-colxx",{key:s,attrs:{xxs:"12",md:"6"}},[a("b-card",{staticClass:"my-2 address-card",class:{active:e.id===t.selectedAddressId!=""},attrs:{"no-body":""}},[a("b-card-body",{staticClass:"px-2 py-3 address-card-body",on:{click:function(a){return t.selectAddress(e)}}},[e.id===t.selectedAddressId?a("div",{staticClass:"selected-address"},[a("i",{staticClass:"fas fa-check fa-2x text-primary"})]):t._e(),t._v(" "),a("h5",{staticClass:"title text-primary"},[t._v(t._s(e.companyName||e.name+" "+e.surname))]),t._v(" "),a("ul",{staticClass:"fa-ul ml-3 mb-0"},[a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v(" "),Object.keys(e.city).length>0?a("span",[t._v(t._s(e.city)+",")]):t._e(),t._v(" "+t._s(e.address)+"\n                                ")]),t._v(" "),a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v("\n                                    "+t._s(e.postalCode)+" "+t._s(e.postal)+"\n                                ")]),t._v(" "),e.nip?a("li",[a("i",{staticClass:"fas fa-angle-right fa-li text-primary"}),t._v("\n                                    NIP: "+t._s(e.countryIso)+" "+t._s(e.nip)+"\n                                ")]):t._e()])]),t._v(" "),a("b-card-footer",{staticClass:"p-1 bg-white"},[a("div",{staticClass:"float-right"},[a("b-button",{attrs:{variant:"outline-primary",size:"sm",type:"button"},on:{click:function(a){return t.deleteClick(e)}}},[t._v("usuń")]),t._v(" "),null!==t.userId&&void 0!==t.userId?a("b-button",{attrs:{variant:"outline-primary",size:"sm",type:"button"},on:{click:function(a){return t.editClick(e)}}},[t._v("edytuj")]):t._e()],1)])],1)],1)})),1):a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("b-card",{staticClass:"my-2 d-flex flex-row",attrs:{"no-body":""}},[a("div",{staticClass:"d-flex flex-grow-1 min-width-zero"},[a("div",{staticClass:"card-body"},[t._v("\n                                "+t._s(t._f("l")("Brak dostępnych adresów"))+"\n                            ")])])])],1)],1)],1):a("b-colxx",{attrs:{xxs:"12"}},[a("b-card",{staticStyle:{"min-height":"220px"},attrs:{"no-body":""}},[a("div",{staticClass:"card-body d-flex align-items-center justify-content-center p-3"},[a("div",{staticClass:"loading-div",staticStyle:{width:"40px",height:"40px"}})])])],1)],1),t._v(" "),a("b-modal",{ref:"modalDelete",attrs:{id:"modalDelete",size:"md",title:"Zarządzanie adresem",centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""}},[a("b-form",{ref:"formDelete",attrs:{id:"formDelete"},on:{submit:function(e){return e.preventDefault(),t.confirmDelete(e)}}},[a("b-row",[a("b-colxx",{attrs:{xs:"12"}},[a("h6",[t._v("Czy chcesz usunąć adres?")])])],1)],1),t._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{staticClass:"col-2",attrs:{type:"button",variant:"outline-primary"},on:{click:function(e){return t.$refs.modalDelete.hide()}}},[t._v("Nie")]),t._v(" "),a("b-button",{staticClass:"col-2",attrs:{type:"submit",variant:"primary",form:"formDelete"}},[t._v("Tak")])],1)],2),t._v(" "),t.showModal?a("DeliveryModal",{attrs:{display:t.showModal,data:t.modalObject,countries:t.countries,type:t.currentUser.type},on:{changeDisplayModal:function(e){t.showModal=!1},changeLoader:t.changeLoader,saveChanges:t.saveDelivery}}):t._e()],1)}),[],!1,null,null,null);e.default=n.exports},fa26:function(t,e,a){"use strict";var s={props:["data","display","countries","type"],methods:{saveDelivery:function(){this.$emit("saveChanges",this.data)}},computed:{activeModal:{get:function(){return this.display},set:function(t){this.$emit("changeDisplayModal",t)}}},components:{vSelectComponent:(a("7f7f"),a("7514"),a("4df8")).a},mounted:function(){var t=this;if(this.data.country){var e=this.countries.find((function(e){return e.name===t.data.country}));this.data.country=e}}},r=a("2877"),o=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{ref:"modalDelivery",attrs:{id:"modalDelivery",size:"lg",title:"Zarządzaj adresem dostawy",centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-header-close":""},model:{value:t.activeModal,callback:function(e){t.activeModal=e},expression:"activeModal"}},[a("b-form",{ref:"formDelivery",attrs:{id:"formDelivery"},on:{submit:function(e){return e.preventDefault(),t.saveDelivery(e)}}},[a("b-row",[1===t.type?a("b-colxx",{attrs:{xxs:"12"}},[a("b-form-group",{attrs:{label:"Imie"}},[a("b-form-input",{attrs:{maxlength:49,placeholder:"Imie",type:"text",required:""},model:{value:t.data.name,callback:function(e){t.$set(t.data,"name",e)},expression:"data.name"}})],1)],1):t._e(),t._v(" "),1===t.type?a("b-colxx",{attrs:{xxs:"12"}},[a("b-form-group",{attrs:{label:"Nazwisko"}},[a("b-form-input",{attrs:{maxlength:49,placeholder:"Nazwisko",type:"text",required:""},model:{value:t.data.surname,callback:function(e){t.$set(t.data,"surname",e)},expression:"data.surname"}})],1)],1):a("b-colxx",{attrs:{xxs:"12"}},[a("b-form-group",{attrs:{label:"Nazwa firmy"}},[a("b-form-input",{attrs:{maxlength:49,placeholder:"Nazwa firmy",type:"text",required:""},model:{value:t.data.companyName,callback:function(e){t.$set(t.data,"companyName",e)},expression:"data.companyName"}})],1)],1),t._v(" "),a("b-colxx",{attrs:{xxs:"12"}},[a("b-form-group",{attrs:{label:"Kraj"}},[a("vSelectComponent",{attrs:{requiredForm:"",options:t.countries,label:"name",placeholder:"Wybierz kraj"},model:{value:t.data.country,callback:function(e){t.$set(t.data,"country",e)},expression:"data.country"}})],1)],1),t._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"4"}},[a("b-form-group",{attrs:{label:"Kod pocztowy"}},[a("b-form-input",{attrs:{id:"kod_pocztowy",required:"",placeholder:"Kod pocztowy",type:"text"},model:{value:t.data.postalCode,callback:function(e){t.$set(t.data,"postalCode",e)},expression:"data.postalCode"}})],1)],1),t._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"8"}},[a("b-form-group",{attrs:{label:"Miejscowość"}},[a("b-form-input",{attrs:{required:"",placeholder:"Miasto",type:"text"},model:{value:t.data.city,callback:function(e){t.$set(t.data,"city",e)},expression:"data.city"}})],1)],1),t._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6",lg:"12",xl:"6"}},[a("b-form-group",{attrs:{label:"Ulica"}},[a("b-form-input",{attrs:{placeholder:"Ulica",type:"text"},model:{value:t.data.street,callback:function(e){t.$set(t.data,"street",e)},expression:"data.street"}})],1)],1),t._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"3",lg:"6",xl:"3"}},[a("b-form-group",{attrs:{label:"Nr budynku"}},[a("b-form-input",{attrs:{required:"",placeholder:"Nr budynku",type:"text"},model:{value:t.data.houseNumber,callback:function(e){t.$set(t.data,"houseNumber",e)},expression:"data.houseNumber"}})],1)],1),t._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"3",lg:"6",xl:"3"}},[a("b-form-group",{attrs:{label:"Nr lokalu"}},[a("b-form-input",{attrs:{placeholder:"Nr lokalu",type:"text"},model:{value:t.data.apartmentNumber,callback:function(e){t.$set(t.data,"apartmentNumber",e)},expression:"data.apartmentNumber"}})],1)],1),t._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Email"}},[a("b-form-input",{attrs:{required:"",placeholder:"Email",type:"email"},model:{value:t.data.email,callback:function(e){t.$set(t.data,"email",e)},expression:"data.email"}})],1)],1),t._v(" "),a("b-colxx",{attrs:{xxs:"12",md:"6"}},[a("b-form-group",{attrs:{label:"Telefon"}},[a("b-form-input",{attrs:{required:"",placeholder:"Telefon",type:"text"},model:{value:t.data.phone,callback:function(e){t.$set(t.data,"phone",e)},expression:"data.phone"}})],1)],1)],1)],1),t._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{staticClass:"squared",attrs:{type:"button",variant:"outline-primary"},on:{click:function(e){return t.$emit("changeDisplayModal",!1)}}},[t._v("Anuluj")]),t._v(" "),a("b-button",{staticClass:"squared",attrs:{type:"submit",variant:"primary",form:"formDelivery"}},[t._v("Zapisz")])],1)],2)],1)}),[],!1,null,null,null);e.a=o.exports}}]);